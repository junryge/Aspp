# ğŸ” V8_2í•™ìŠµ.PY - ì½”ë“œ í•œ ì¤„ì”© ì™„ì „ ë¶„ì„

**ê³ ê°ìš© - ëª¨ë“  ì½”ë“œë¥¼ í•œ ì¤„ì”© ì„¤ëª…í•©ë‹ˆë‹¤**

---

## ğŸ“‘ ëª©ì°¨

1. [íŒŒì¼ í—¤ë” ë° ë¼ì´ë¸ŒëŸ¬ë¦¬](#1-íŒŒì¼-í—¤ë”-ë°-ë¼ì´ë¸ŒëŸ¬ë¦¬-1~21í–‰)
2. [Feature ìƒì„± í•¨ìˆ˜ - ê¸°ë³¸ í†µê³„](#2-feature-ìƒì„±-í•¨ìˆ˜---ê¸°ë³¸-í†µê³„-26~207í–‰)
3. [Feature ìƒì„± í•¨ìˆ˜ - Interaction](#3-feature-ìƒì„±-í•¨ìˆ˜---interaction-208~267í–‰)
4. [Feature ìƒì„± í•¨ìˆ˜ - ì„ê³„ê°’](#4-feature-ìƒì„±-í•¨ìˆ˜---ì„ê³„ê°’-268~302í–‰)
5. [Feature ìƒì„± í•¨ìˆ˜ - í™©ê¸ˆ íŒ¨í„´](#5-feature-ìƒì„±-í•¨ìˆ˜---í™©ê¸ˆ-íŒ¨í„´-303~337í–‰)
6. [Feature ìƒì„± í•¨ìˆ˜ - ì‹œê°„ëŒ€ë³„](#6-feature-ìƒì„±-í•¨ìˆ˜---ì‹œê°„ëŒ€ë³„-338~366í–‰)
7. [ë°ì´í„° ì¤€ë¹„ í•¨ìˆ˜](#7-ë°ì´í„°-ì¤€ë¹„-í•¨ìˆ˜-365~427í–‰)
8. [ë°ì´í„° ì¦ê°• í•¨ìˆ˜](#8-ë°ì´í„°-ì¦ê°•-í•¨ìˆ˜-432~451í–‰)
9. [í•™ìŠµ í•¨ìˆ˜](#9-í•™ìŠµ-í•¨ìˆ˜-456~479í–‰)
10. [í‰ê°€ í•¨ìˆ˜](#10-í‰ê°€-í•¨ìˆ˜-484~517í–‰)
11. [Feature ì¤‘ìš”ë„ í•¨ìˆ˜](#11-feature-ì¤‘ìš”ë„-í•¨ìˆ˜-522~533í–‰)
12. [ë©”ì¸ ì‹¤í–‰](#12-ë©”ì¸-ì‹¤í–‰-538~573í–‰)

---

## 1. íŒŒì¼ í—¤ë” ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ (1~21í–‰)

### ì½”ë“œ

```python
#!/usr/bin/env python3
```
**ì„¤ëª…:** ì´ íŒŒì¼ì´ Python3ë¡œ ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì„ì„ ì•Œë ¤ì¤Œ

---

```python
# -*- coding: utf-8 -*-
```
**ì„¤ëª…:** í•œê¸€ ë“± íŠ¹ìˆ˜ë¬¸ìë¥¼ ì œëŒ€ë¡œ ì½ê¸° ìœ„í•œ ì¸ì½”ë”© ì„¤ì •

---

```python
"""
ğŸš€ XGBoost í•™ìŠµ - 13ê°œ ì»¬ëŸ¼ ìµœì¢… ê°•í™” ë²„ì „
VERTICAL ì œê±°, multiplier=90!
"""
```
**ì„¤ëª…:** íŒŒì¼ ì„¤ëª… ì£¼ì„
- 13ê°œ ì»¬ëŸ¼ ì‚¬ìš©
- multiplier=90 (1700+ ë°ì´í„° 90ë°° ì¦ê°•)

---

```python
import numpy as np
```
**ì„¤ëª…:** numpy ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
- ìš©ë„: í‰ê· , í‘œì¤€í¸ì°¨, ìµœëŒ€/ìµœì†Œê°’ ê°™ì€ ìˆ«ì ê³„ì‚°
- ë³„ì¹­: np (ì§§ê²Œ ì“°ê¸° ìœ„í•´)

---

```python
import pandas as pd
```
**ì„¤ëª…:** pandas ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
- ìš©ë„: CSV íŒŒì¼ ì½ê¸°, ë°ì´í„°í”„ë ˆì„(ì—‘ì…€ ê°™ì€ í‘œ) ë‹¤ë£¨ê¸°
- ë³„ì¹­: pd

---

```python
import xgboost as xgb
```
**ì„¤ëª…:** XGBoost ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
- ìš©ë„: AI ëª¨ë¸ (Gradient Boosting)
- ë³„ì¹­: xgb

---

```python
from sklearn.metrics import mean_absolute_error, mean_squared_error, r2_score
```
**ì„¤ëª…:** sklearnì—ì„œ ì„±ëŠ¥ ì¸¡ì • í•¨ìˆ˜ë“¤ ë¶ˆëŸ¬ì˜¤ê¸°
- mean_absolute_error: í‰ê·  ì ˆëŒ€ ì˜¤ì°¨ (MAE)
- mean_squared_error: í‰ê·  ì œê³± ì˜¤ì°¨ (RMSE ê³„ì‚°ìš©)
- r2_score: ê²°ì •ê³„ìˆ˜ (ëª¨ë¸ ì •í™•ë„)

---

```python
import pickle
```
**ì„¤ëª…:** pickle ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸°
- ìš©ë„: í•™ìŠµëœ ëª¨ë¸ì„ íŒŒì¼ë¡œ ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¤ê¸°

---

```python
import warnings
```
**ì„¤ëª…:** ê²½ê³  ë©”ì‹œì§€ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

---

```python
warnings.filterwarnings('ignore')
```
**ì„¤ëª…:** ëª¨ë“  ê²½ê³  ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
- ì´ìœ : í•™ìŠµ ì¤‘ ë¶ˆí•„ìš”í•œ ê²½ê³ ê°€ ë§ì´ ë‚˜ì™€ì„œ ë³´ê¸° ë¶ˆí¸í•¨

---

```python
print("="*80)
```
**ì„¤ëª…:** ë“±í˜¸(=)ë¥¼ 80ê°œ ì¶œë ¥
- ê²°ê³¼: ================... (80ê°œ)
- ìš©ë„: í™”ë©´ì—ì„œ êµ¬ë¶„ì„  í‘œì‹œ

---

```python
print("ğŸš€ XGBoost í•™ìŠµ - 13ê°œ ì»¬ëŸ¼ ìµœì¢… ê°•í™”!")
```
**ì„¤ëª…:** í”„ë¡œê·¸ë¨ ì‹œì‘ ë©”ì‹œì§€ ì¶œë ¥

---

```python
print("="*80)
print("multiplier=50 - 1700+ ëŒ€í­ ì¦ê°•!")
print("Queue Gap 4.2ë°° / TRANSPORT 1.29ë°° í™œìš©!")
print("="*80)
```
**ì„¤ëª…:** ì„¤ì • ì •ë³´ ì¶œë ¥
- multiplier=50: ë‚˜ì¤‘ì— 90ìœ¼ë¡œ ë³€ê²½ë¨
- Queue Gap 4.2ë°°: queue_gapì´ ë‹¤ë¥¸ ë³€ìˆ˜ë³´ë‹¤ 4.2ë°° ì¤‘ìš”í•¨
- TRANSPORT 1.29ë°°: transportê°€ 1.29ë°° ì¤‘ìš”í•¨

---

## 2. Feature ìƒì„± í•¨ìˆ˜ - ê¸°ë³¸ í†µê³„ (26~207í–‰)

### í•¨ìˆ˜ ì‹œì‘

```python
def create_features_13col_optimized(row_dict):
```
**ì„¤ëª…:** Feature ìƒì„± í•¨ìˆ˜ ì •ì˜
- ì…ë ¥: row_dict (13ê°œ ì»¬ëŸ¼ì˜ 280ë¶„ ë°ì´í„°)
- ì¶œë ¥: 222ê°œ Feature
- ì´ë¦„: create_features_13col_optimized

---

```python
    """13ê°œ ì»¬ëŸ¼ ìµœì í™” Feature ìƒì„± (~222ê°œ)"""
```
**ì„¤ëª…:** í•¨ìˆ˜ ì„¤ëª… ì£¼ì„

---

```python
    features = {}
```
**ì„¤ëª…:** ë¹ˆ ë”•ì…”ë„ˆë¦¬ ìƒì„±
- ìš©ë„: Featureë“¤ì„ ì €ì¥í•  ê³µê°„
- ì˜ˆ: {'m14b_mean': 410, 'm14b_max': 520, ...}

---

### ì‹œí€€ìŠ¤ ì¶”ì¶œ (31~42í–‰)

```python
    seq_m14b = np.array(row_dict['M14AM14B'])
```
**ì„¤ëª…:** M14AM14B ì»¬ëŸ¼ì˜ 280ë¶„ ë°ì´í„°ë¥¼ numpy ë°°ì—´ë¡œ ë³€í™˜
- ì…ë ¥: [300, 305, 310, ..., 520] (280ê°œ)
- ì¶œë ¥: numpy array

---

```python
    seq_m14b_sum = np.array(row_dict['M14AM14BSUM'])
```
**ì„¤ëª…:** M14AM14BSUM ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_m14b_rev = np.array(row_dict['M14BM14A'])
```
**ì„¤ëª…:** M14BM14A (ì—­ë°©í–¥) ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_m10a = np.array(row_dict['M14AM10A'])
```
**ì„¤ëª…:** M14AM10A ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_m10a_rev = np.array(row_dict['M10AM14A'])
```
**ì„¤ëª…:** M10AM14A (ì—­ë°©í–¥) ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_m16_rev = np.array(row_dict['M16M14A'])
```
**ì„¤ëª…:** M16M14A (ì—­ë°©í–¥) ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_m16_sum = np.array(row_dict['M14AM16SUM'])
```
**ì„¤ëª…:** M14AM16SUM ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_totalcnt = np.array(row_dict['TOTALCNT'])
```
**ì„¤ëª…:** TOTALCNT (ì˜ˆì¸¡ ëª©í‘œ) ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_q_created = np.array(row_dict['M14.QUE.ALL.CURRENTQCREATED'])
```
**ì„¤ëª…:** Queue Created (ìƒì„±ëœ í) ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_q_completed = np.array(row_dict['M14.QUE.ALL.CURRENTQCOMPLETED'])
```
**ì„¤ëª…:** Queue Completed (ì™„ë£Œëœ í) ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_oht = np.array(row_dict['M14.QUE.OHT.OHTUTIL'])
```
**ì„¤ëª…:** OHT ì‚¬ìš©ë¥  ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

```python
    seq_transport = np.array(row_dict['M14.QUE.ALL.TRANSPORT4MINOVERCNT'])
```
**ì„¤ëª…:** Transport (4ë¶„ ì´ˆê³¼ ìš´ì†¡ ê±´ìˆ˜) ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ë³€í™˜

---

### íŒŒìƒ ë³€ìˆ˜

```python
    seq_queue_gap = seq_q_created - seq_q_completed
```
**ì„¤ëª…:** queue_gap ê³„ì‚° â­ ê°€ì¥ ì¤‘ìš”!
- ê³µì‹: ìƒì„±ëœ í - ì™„ë£Œëœ í
- ì˜ë¯¸: ëŒ€ê¸° ì¤‘ì¸ ì‘ì—…ëŸ‰
- ì˜ˆ: 1500 - 1450 = 50 (50ê°œ ëŒ€ê¸° ì¤‘)

---

### M14AM14B Feature ìƒì„± (50~59í–‰)

```python
    features['m14b_mean'] = np.mean(seq_m14b)
```
**ì„¤ëª…:** M14AM14Bì˜ 280ë¶„ í‰ê·  ê³„ì‚°
- í•¨ìˆ˜: np.mean() - í‰ê·  êµ¬í•˜ê¸°
- ì˜ˆ: [300, 310, 320, ..., 520] â†’ í‰ê·  410
- ì €ì¥: features['m14b_mean'] = 410

---

```python
    features['m14b_std'] = np.std(seq_m14b)
```
**ì„¤ëª…:** M14AM14Bì˜ í‘œì¤€í¸ì°¨ ê³„ì‚°
- í•¨ìˆ˜: np.std() - í‘œì¤€í¸ì°¨ (ë³€ë™ì„±)
- ì˜ë¯¸: ì–¼ë§ˆë‚˜ ë“¤ì­‰ë‚ ì­‰í•œê°€?
- ì˜ˆ: std = 10 (ì•ˆì •ì ) / std = 100 (ë¶ˆì•ˆì •)

---

```python
    features['m14b_max'] = np.max(seq_m14b)
```
**ì„¤ëª…:** M14AM14Bì˜ ìµœëŒ€ê°’ ì°¾ê¸°
- í•¨ìˆ˜: np.max() - ìµœëŒ€ê°’
- ì˜ˆ: [300, 310, 520, 400] â†’ ìµœëŒ€ 520

---

```python
    features['m14b_min'] = np.min(seq_m14b)
```
**ì„¤ëª…:** M14AM14Bì˜ ìµœì†Œê°’ ì°¾ê¸°
- í•¨ìˆ˜: np.min() - ìµœì†Œê°’
- ì˜ˆ: [300, 310, 520, 400] â†’ ìµœì†Œ 300

---

```python
    features['m14b_current'] = seq_m14b[-1]
```
**ì„¤ëª…:** M14AM14Bì˜ í˜„ì¬ê°’ (ê°€ì¥ ìµœê·¼ ê°’)
- [-1]: Pythonì—ì„œ ë§ˆì§€ë§‰ ê°’ì„ ì˜ë¯¸
- ì˜ˆ: [300, 310, ..., 520] â†’ í˜„ì¬ 520

---

```python
    features['m14b_last_5'] = np.mean(seq_m14b[-5:])
```
**ì„¤ëª…:** M14AM14Bì˜ ìµœê·¼ 5ë¶„ í‰ê· 
- [-5:]: ë§ˆì§€ë§‰ 5ê°œ ê°’
- ì˜ˆ: [..., 510, 515, 518, 520, 522] â†’ í‰ê·  517
- ì˜ë¯¸: ì´ˆë‹¨ê¸° ì¶”ì„¸

---

```python
    features['m14b_last_10'] = np.mean(seq_m14b[-10:])
```
**ì„¤ëª…:** M14AM14Bì˜ ìµœê·¼ 10ë¶„ í‰ê· 
- [-10:]: ë§ˆì§€ë§‰ 10ê°œ ê°’
- ì˜ë¯¸: ë‹¨ê¸° ì¶”ì„¸

---

```python
    features['m14b_last_30'] = np.mean(seq_m14b[-30:])
```
**ì„¤ëª…:** M14AM14Bì˜ ìµœê·¼ 30ë¶„ í‰ê· 
- [-30:]: ë§ˆì§€ë§‰ 30ê°œ ê°’
- ì˜ë¯¸: ì¤‘ê¸° ì¶”ì„¸

---

```python
    features['m14b_slope'] = np.polyfit(np.arange(280), seq_m14b, 1)[0]
```
**ì„¤ëª…:** M14AM14Bì˜ ì¶”ì„¸ ê³„ì‚°
- np.polyfit(): ì„ í˜• íšŒê·€ (1ì°¨ í•¨ìˆ˜ y=ax+bì˜ a êµ¬í•˜ê¸°)
- np.arange(280): [0, 1, 2, ..., 279] (ì‹œê°„)
- [0]: ê¸°ìš¸ê¸°(a)ë§Œ ê°€ì ¸ì˜¤ê¸°
- ì˜ˆ: slope = +2.5 (ì¦ê°€ ì¶”ì„¸) / slope = -1.2 (ê°ì†Œ ì¶”ì„¸)

---

```python
    features['m14b_range'] = np.max(seq_m14b) - np.min(seq_m14b)
```
**ì„¤ëª…:** M14AM14Bì˜ ë³€ë™í­ ê³„ì‚°
- ê³µì‹: ìµœëŒ€ê°’ - ìµœì†Œê°’
- ì˜ˆ: 520 - 300 = 220
- ì˜ë¯¸: ì–¼ë§ˆë‚˜ ìš”ë™ì³¤ë‚˜?

---

### M14AM14BSUM Feature (64~73í–‰)

```python
    features['m14bsum_mean'] = np.mean(seq_m14b_sum)
```
**ì„¤ëª…:** M14AM14BSUMì˜ í‰ê·  (ìœ„ì™€ ë™ì¼í•œ ë°©ì‹)

```python
    features['m14bsum_std'] = np.std(seq_m14b_sum)
```
**ì„¤ëª…:** M14AM14BSUMì˜ í‘œì¤€í¸ì°¨

```python
    features['m14bsum_max'] = np.max(seq_m14b_sum)
```
**ì„¤ëª…:** M14AM14BSUMì˜ ìµœëŒ€ê°’

```python
    features['m14bsum_min'] = np.min(seq_m14b_sum)
```
**ì„¤ëª…:** M14AM14BSUMì˜ ìµœì†Œê°’

```python
    features['m14bsum_current'] = seq_m14b_sum[-1]
```
**ì„¤ëª…:** M14AM14BSUMì˜ í˜„ì¬ê°’

```python
    features['m14bsum_last_5'] = np.mean(seq_m14b_sum[-5:])
```
**ì„¤ëª…:** M14AM14BSUMì˜ ìµœê·¼ 5ë¶„ í‰ê· 

```python
    features['m14bsum_last_10'] = np.mean(seq_m14b_sum[-10:])
```
**ì„¤ëª…:** M14AM14BSUMì˜ ìµœê·¼ 10ë¶„ í‰ê· 

```python
    features['m14bsum_last_30'] = np.mean(seq_m14b_sum[-30:])
```
**ì„¤ëª…:** M14AM14BSUMì˜ ìµœê·¼ 30ë¶„ í‰ê· 

```python
    features['m14bsum_slope'] = np.polyfit(np.arange(280), seq_m14b_sum, 1)[0]
```
**ì„¤ëª…:** M14AM14BSUMì˜ ì¶”ì„¸

```python
    features['m14bsum_range'] = np.max(seq_m14b_sum) - np.min(seq_m14b_sum)
```
**ì„¤ëª…:** M14AM14BSUMì˜ ë³€ë™í­

---

**ğŸ’¡ ì°¸ê³ :** ë‚˜ë¨¸ì§€ 11ê°œ ì»¬ëŸ¼(M14BM14A, M14AM10A, M10AM14A, M16M14A, M14AM16SUM, TOTALCNT, Queue Created, Queue Completed, OHT, Transport, Queue Gap)ë„ ë™ì¼í•œ íŒ¨í„´ìœ¼ë¡œ 10ê°œì”© Feature ìƒì„±

**ì´ 13ê°œ ì»¬ëŸ¼ Ã— 10ê°œ = 130ê°œ Feature**

---

## 3. Feature ìƒì„± í•¨ìˆ˜ - Interaction (208~267í–‰)

### ê³±ì…ˆ ì¡°í•© Feature

```python
    features['m14b_x_m14bsum'] = seq_m14b[-1] * seq_m14b_sum[-1] / 1000
```
**ì„¤ëª…:** M14AM14Bì™€ M14AM14BSUMì˜ ê³±
- seq_m14b[-1]: í˜„ì¬ M14AM14B ê°’
- seq_m14b_sum[-1]: í˜„ì¬ M14AM14BSUM ê°’
- ê³±í•œ í›„ 1000ìœ¼ë¡œ ë‚˜ëˆ” (ìˆ«ì í¬ê¸° ì¡°ì •)
- ì˜ˆ: 520 Ã— 600 / 1000 = 312
- ì˜ë¯¸: ë‘ ê°’ì´ ë™ì‹œì— ë†’ìœ¼ë©´ ìœ„í—˜!

---

```python
    features['m14b_x_m14bsum_mean'] = np.mean(seq_m14b * seq_m14b_sum) / 1000
```
**ì„¤ëª…:** M14AM14Bì™€ M14AM14BSUMì˜ 280ë¶„ í‰ê·  ê³±
- seq_m14b * seq_m14b_sum: ê° ì‹œì ë§ˆë‹¤ ê³±í•˜ê¸°
- np.mean(): ê·¸ í‰ê· 
- ì˜ë¯¸: ì „ì²´ì ìœ¼ë¡œ ë‘ ê°’ì˜ ìƒí˜¸ì‘ìš©

---

```python
    features['m14bsum_per_m14b'] = seq_m14b_sum[-1] / (seq_m14b[-1] + 1)
```
**ì„¤ëª…:** M14AM14BSUMì„ M14AM14Bë¡œ ë‚˜ëˆˆ ë¹„ìœ¨
- (seq_m14b[-1] + 1): 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ë°©ì§€ (+1)
- ì˜ˆ: 600 / 520 = 1.15
- ì˜ë¯¸: BSUMì´ Bë³´ë‹¤ ì–¼ë§ˆë‚˜ í°ê°€?

---

```python
    features['m14b_plus_m14bsum'] = seq_m14b[-1] + seq_m14b_sum[-1]
```
**ì„¤ëª…:** M14AM14Bì™€ M14AM14BSUMì˜ í•©
- ì˜ˆ: 520 + 600 = 1120
- ì˜ë¯¸: ì „ì²´ ë¬¼ë¥˜ëŸ‰

---

```python
    features['gap_x_m14b'] = seq_queue_gap[-1] * seq_m14b[-1] / 1000
```
**ì„¤ëª…:** queue_gapê³¼ M14AM14Bì˜ ê³±
- ì˜ˆ: 300 Ã— 520 / 1000 = 156
- ì˜ë¯¸: gapì´ í¬ê³  M14Bë„ í¬ë©´ â†’ ë§¤ìš° ìœ„í—˜!

---

```python
    features['gap_x_m14bsum'] = seq_queue_gap[-1] * seq_m14b_sum[-1] / 1000
```
**ì„¤ëª…:** queue_gapê³¼ M14AM14BSUMì˜ ê³±
- ì˜ë¯¸: gapê³¼ SUMì˜ ë³µí•© ìœ„í—˜ë„

---

```python
    features['gap_x_total'] = seq_queue_gap[-1] * seq_totalcnt[-1] / 1000
```
**ì„¤ëª…:** queue_gapê³¼ TOTALCNTì˜ ê³±
- ì˜ë¯¸: gapì´ í¬ê³  ì „ì²´ë„ ë§ìœ¼ë©´ ìœ„í—˜!

---

```python
    features['gap_per_total'] = seq_queue_gap[-1] / (seq_totalcnt[-1] + 1)
```
**ì„¤ëª…:** queue_gapì„ TOTALCNTë¡œ ë‚˜ëˆˆ ë¹„ìœ¨
- ì˜ˆ: 300 / 1650 = 0.18 (18%)
- ì˜ë¯¸: ì „ì²´ ëŒ€ë¹„ gap ë¹„ìœ¨

---

```python
    features['trans_x_m14b'] = seq_transport[-1] * seq_m14b[-1] / 100
```
**ì„¤ëª…:** Transportì™€ M14AM14Bì˜ ê³±
- ì˜ë¯¸: ìš´ì†¡ ì§€ì—°ì´ ë§ê³  ë¬¼ë¥˜ë„ ë§ìœ¼ë©´ ìœ„í—˜!

---

```python
    features['trans_x_m14bsum'] = seq_transport[-1] * seq_m14b_sum[-1] / 100
```
**ì„¤ëª…:** Transportì™€ M14AM14BSUMì˜ ê³±

---

```python
    features['trans_x_gap'] = seq_transport[-1] * seq_queue_gap[-1] / 100
```
**ì„¤ëª…:** Transportì™€ queue_gapì˜ ê³±
- ì˜ë¯¸: ì§€ì—°ë„ ë§ê³  ë°€ë¦¼ë„ ë§ìœ¼ë©´ â†’ í­ë°œ!

---

```python
    features['trans_x_oht'] = seq_transport[-1] * seq_oht[-1] / 10
```
**ì„¤ëª…:** Transportì™€ OHT ì‚¬ìš©ë¥ ì˜ ê³±
- ì˜ë¯¸: ì§€ì—° ë§ê³  OHT í’€ê°€ë™ì´ë©´ í•œê³„!

---

```python
    features['triple_danger'] = seq_m14b[-1] * seq_m14b_sum[-1] * seq_transport[-1] / 100000
```
**ì„¤ëª…:** M14B, M14BSUM, Transport ì„¸ ê°’ì˜ ê³±
- ì˜ë¯¸: 3ê°€ì§€ ìœ„í—˜ ìš”ì†Œê°€ ë™ì‹œì— ë†’ìœ¼ë©´ â†’ ìµœê³  ìœ„í—˜!
- ì˜ˆ: 520 Ã— 600 Ã— 180 / 100000 = 561

---

```python
    features['gap_trans_m14b'] = seq_queue_gap[-1] * seq_transport[-1] * seq_m14b[-1] / 100000
```
**ì„¤ëª…:** gap, Transport, M14B ì„¸ ê°’ì˜ ê³±
- ì˜ë¯¸: ë°€ë¦¼ + ì§€ì—° + ë¬¼ë¥˜ = í­ë°œ ìœ„í—˜!

---

### ë¹„ìœ¨ Feature

```python
    features['ratio_m14b_total'] = seq_m14b[-1] / (seq_totalcnt[-1] + 1)
```
**ì„¤ëª…:** M14AM14Bì˜ ì „ì²´ ëŒ€ë¹„ ë¹„ìœ¨
- ì˜ˆ: 520 / 1650 = 0.315 (31.5%)
- ì˜ë¯¸: M14Bê°€ ì „ì²´ì˜ ëª‡ %ì¸ê°€?

---

```python
    features['ratio_m14bsum_total'] = seq_m14b_sum[-1] / (seq_totalcnt[-1] + 1)
```
**ì„¤ëª…:** M14AM14BSUMì˜ ì „ì²´ ëŒ€ë¹„ ë¹„ìœ¨

---

```python
    features['ratio_gap_m14b'] = seq_queue_gap[-1] / (seq_m14b[-1] + 1)
```
**ì„¤ëª…:** queue_gapì˜ M14B ëŒ€ë¹„ ë¹„ìœ¨

---

```python
    features['ratio_trans_total'] = seq_transport[-1] / (seq_totalcnt[-1] + 1)
```
**ì„¤ëª…:** Transportì˜ ì „ì²´ ëŒ€ë¹„ ë¹„ìœ¨

---

### ë³€ë™ì„± Feature

```python
    features['vol_m14b'] = np.std(seq_m14b) / (np.mean(seq_m14b) + 1)
```
**ì„¤ëª…:** M14AM14Bì˜ ë³€ë™ì„± ê³„ì‚°
- ê³µì‹: í‘œì¤€í¸ì°¨ / í‰ê· 
- ì˜ˆ: std 80 / mean 400 = 0.2 (20% ë³€ë™)
- ì˜ë¯¸: í‰ê·  ëŒ€ë¹„ ì–¼ë§ˆë‚˜ í”ë“¤ë¦¬ë‚˜?

---

```python
    features['vol_m14bsum'] = np.std(seq_m14b_sum) / (np.mean(seq_m14b_sum) + 1)
```
**ì„¤ëª…:** M14AM14BSUMì˜ ë³€ë™ì„±

---

```python
    features['vol_total'] = np.std(seq_totalcnt) / (np.mean(seq_totalcnt) + 1)
```
**ì„¤ëª…:** TOTALCNTì˜ ë³€ë™ì„±

---

```python
    features['vol_gap'] = np.std(seq_queue_gap) / (np.mean(np.abs(seq_queue_gap)) + 1)
```
**ì„¤ëª…:** queue_gapì˜ ë³€ë™ì„±
- np.abs(): ì ˆëŒ€ê°’ (ìŒìˆ˜ ë°©ì§€)

---

```python
    features['vol_trans'] = np.std(seq_transport) / (np.mean(seq_transport) + 1)
```
**ì„¤ëª…:** Transportì˜ ë³€ë™ì„±

---

### ìƒê´€ê³„ìˆ˜ Feature

```python
    features['corr_m14b_total'] = np.corrcoef(seq_m14b, seq_totalcnt)[0, 1]
```
**ì„¤ëª…:** M14AM14Bì™€ TOTALCNTì˜ ìƒê´€ê³„ìˆ˜
- np.corrcoef(): ìƒê´€ê³„ìˆ˜ ê³„ì‚° (-1 ~ +1)
- [0, 1]: ê²°ê³¼ í–‰ë ¬ì—ì„œ ìƒê´€ê³„ìˆ˜ ê°’ ì¶”ì¶œ
- ì˜ˆ: 0.8 (ê°•í•œ ì–‘ì˜ ìƒê´€ê´€ê³„)
- ì˜ë¯¸: M14Bê°€ ì¦ê°€í•˜ë©´ TOTALë„ ì¦ê°€í•˜ë‚˜?

---

```python
    features['corr_m14bsum_total'] = np.corrcoef(seq_m14b_sum, seq_totalcnt)[0, 1]
```
**ì„¤ëª…:** M14AM14BSUMê³¼ TOTALCNTì˜ ìƒê´€ê³„ìˆ˜

---

```python
    features['corr_gap_total'] = np.corrcoef(seq_queue_gap, seq_totalcnt)[0, 1]
```
**ì„¤ëª…:** queue_gapê³¼ TOTALCNTì˜ ìƒê´€ê³„ìˆ˜
- ì˜ë¯¸: gapì´ ì»¤ì§€ë©´ TOTALë„ ì»¤ì§€ë‚˜? (ë§¤ìš° ì¤‘ìš”!)

---

```python
    features['corr_trans_total'] = np.corrcoef(seq_transport, seq_totalcnt)[0, 1]
```
**ì„¤ëª…:** Transportì™€ TOTALCNTì˜ ìƒê´€ê³„ìˆ˜

---

**ì´ Interaction Features: 30ê°œ**

---

## 4. Feature ìƒì„± í•¨ìˆ˜ - ì„ê³„ê°’ (268~302í–‰)

### M14AM14B ì„ê³„ê°’ ì¹´ìš´íŠ¸

```python
    features['m14b_over_497'] = np.sum(seq_m14b > 497)
```
**ì„¤ëª…:** M14AM14Bê°€ 497ì„ ë„˜ì€ íšŸìˆ˜
- np.sum(): Trueì˜ ê°œìˆ˜ ì„¸ê¸°
- seq_m14b > 497: ê° ê°’ì´ 497ë³´ë‹¤ í°ì§€ ì²´í¬
- ì˜ˆ: 280ë¶„ ì¤‘ 45ë²ˆ ë„˜ì—ˆìœ¼ë©´ â†’ 45
- ì˜ë¯¸: ì–¼ë§ˆë‚˜ ìì£¼ ë†’ì•˜ë‚˜?

---

```python
    features['m14b_over_517'] = np.sum(seq_m14b > 517)
```
**ì„¤ëª…:** M14AM14Bê°€ 517ì„ ë„˜ì€ íšŸìˆ˜
- 517: í™©ê¸ˆ íŒ¨í„´ ì„ê³„ê°’

---

```python
    features['m14b_over_520'] = np.sum(seq_m14b > 520)
```
**ì„¤ëª…:** M14AM14Bê°€ 520ì„ ë„˜ì€ íšŸìˆ˜
- 520: ì—„ê²©í•œ í™©ê¸ˆ íŒ¨í„´ ì„ê³„ê°’

---

```python
    features['m14b_over_539'] = np.sum(seq_m14b > 539)
```
**ì„¤ëª…:** M14AM14Bê°€ 539ë¥¼ ë„˜ì€ íšŸìˆ˜
- 539: ê·¹í•œ ìœ„í—˜ ìˆ˜ì¤€

---

### M14AM14BSUM ì„ê³„ê°’ ì¹´ìš´íŠ¸

```python
    features['m14bsum_over_566'] = np.sum(seq_m14b_sum > 566)
```
**ì„¤ëª…:** M14AM14BSUMì´ 566ì„ ë„˜ì€ íšŸìˆ˜
- 566: í™©ê¸ˆ íŒ¨í„´ ì„ê³„ê°’

---

```python
    features['m14bsum_over_576'] = np.sum(seq_m14b_sum > 576)
```
**ì„¤ëª…:** M14AM14BSUMì´ 576ì„ ë„˜ì€ íšŸìˆ˜

---

```python
    features['m14bsum_over_588'] = np.sum(seq_m14b_sum > 588)
```
**ì„¤ëª…:** M14AM14BSUMì´ 588ì„ ë„˜ì€ íšŸìˆ˜
- 588: ì—„ê²©í•œ í™©ê¸ˆ íŒ¨í„´ ì„ê³„ê°’

---

```python
    features['m14bsum_over_602'] = np.sum(seq_m14b_sum > 602)
```
**ì„¤ëª…:** M14AM14BSUMì´ 602ë¥¼ ë„˜ì€ íšŸìˆ˜

---

### queue_gap ì„ê³„ê°’ ì¹´ìš´íŠ¸

```python
    features['gap_over_200'] = np.sum(seq_queue_gap > 200)
```
**ì„¤ëª…:** queue_gapì´ 200ì„ ë„˜ì€ íšŸìˆ˜
- 200: ì£¼ì˜ ìˆ˜ì¤€

---

```python
    features['gap_over_250'] = np.sum(seq_queue_gap > 250)
```
**ì„¤ëª…:** queue_gapì´ 250ì„ ë„˜ì€ íšŸìˆ˜
- 250: ê²½ê³  ìˆ˜ì¤€

---

```python
    features['gap_over_300'] = np.sum(seq_queue_gap > 300)
```
**ì„¤ëª…:** queue_gapì´ 300ì„ ë„˜ì€ íšŸìˆ˜
- 300: ìœ„í—˜ ìˆ˜ì¤€ âš ï¸

---

```python
    features['gap_over_350'] = np.sum(seq_queue_gap > 350)
```
**ì„¤ëª…:** queue_gapì´ 350ì„ ë„˜ì€ íšŸìˆ˜
- 350: ë§¤ìš° ìœ„í—˜ ğŸš¨

---

### Transport ì„ê³„ê°’ ì¹´ìš´íŠ¸

```python
    features['trans_over_145'] = np.sum(seq_transport > 145)
```
**ì„¤ëª…:** Transportê°€ 145ë¥¼ ë„˜ì€ íšŸìˆ˜

---

```python
    features['trans_over_151'] = np.sum(seq_transport > 151)
```
**ì„¤ëª…:** Transportê°€ 151ì„ ë„˜ì€ íšŸìˆ˜
- 151: ìœ„í—˜ ìˆ˜ì¤€

---

```python
    features['trans_over_171'] = np.sum(seq_transport > 171)
```
**ì„¤ëª…:** Transportê°€ 171ì„ ë„˜ì€ íšŸìˆ˜

---

```python
    features['trans_over_180'] = np.sum(seq_transport > 180)
```
**ì„¤ëª…:** Transportê°€ 180ì„ ë„˜ì€ íšŸìˆ˜
- 180: ë§¤ìš° ìœ„í—˜

---

### OHT ì„ê³„ê°’ ì¹´ìš´íŠ¸

```python
    features['oht_over_83'] = np.sum(seq_oht > 83.6)
```
**ì„¤ëª…:** OHT ì‚¬ìš©ë¥ ì´ 83.6%ë¥¼ ë„˜ì€ íšŸìˆ˜

---

```python
    features['oht_over_84'] = np.sum(seq_oht > 84.6)
```
**ì„¤ëª…:** OHT ì‚¬ìš©ë¥ ì´ 84.6%ë¥¼ ë„˜ì€ íšŸìˆ˜

---

```python
    features['oht_over_86'] = np.sum(seq_oht > 85.6)
```
**ì„¤ëª…:** OHT ì‚¬ìš©ë¥ ì´ 85.6%ë¥¼ ë„˜ì€ íšŸìˆ˜
- 85.6%: ê±°ì˜ í’€ê°€ë™

---

### TOTALCNT ì„ê³„ê°’ ì¹´ìš´íŠ¸

```python
    features['total_over_1500'] = np.sum(seq_totalcnt >= 1500)
```
**ì„¤ëª…:** TOTALCNTê°€ 1500 ì´ìƒì¸ íšŸìˆ˜

---

```python
    features['total_over_1600'] = np.sum(seq_totalcnt >= 1600)
```
**ì„¤ëª…:** TOTALCNTê°€ 1600 ì´ìƒì¸ íšŸìˆ˜
- 1600: ì£¼ì˜ êµ¬ê°„

---

```python
    features['total_over_1700'] = np.sum(seq_totalcnt >= 1700)
```
**ì„¤ëª…:** TOTALCNTê°€ 1700 ì´ìƒì¸ íšŸìˆ˜
- 1700: ìœ„í—˜ êµ¬ê°„! (ì˜ˆì¸¡ ëª©í‘œ)

---

```python
    features['total_over_1600_last30'] = np.sum(seq_totalcnt[-30:] >= 1600)
```
**ì„¤ëª…:** ìµœê·¼ 30ë¶„ ì¤‘ TOTALCNTê°€ 1600 ì´ìƒì¸ íšŸìˆ˜
- [-30:]: ìµœê·¼ 30ë¶„ë§Œ
- ì˜ë¯¸: ìµœê·¼ì— ìœ„í—˜í–ˆë‚˜?

---

### ê¸°íƒ€ ì„ê³„ê°’

```python
    features['m10arev_over_55'] = np.sum(seq_m10a_rev > 55)
```
**ì„¤ëª…:** M10AM14Aê°€ 55ë¥¼ ë„˜ì€ íšŸìˆ˜

---

```python
    features['m10arev_over_59'] = np.sum(seq_m10a_rev > 59)
```
**ì„¤ëª…:** M10AM14Aê°€ 59ë¥¼ ë„˜ì€ íšŸìˆ˜

---

```python
    features['m10a_under_80'] = np.sum(seq_m10a < 80)
```
**ì„¤ëª…:** M14AM10Aê°€ 80 ë¯¸ë§Œì¸ íšŸìˆ˜
- ì˜ë¯¸: M10Aë¡œ ê°€ëŠ” ì–‘ì´ ì ì—ˆë‚˜?

---

```python
    features['m10a_under_70'] = np.sum(seq_m10a < 70)
```
**ì„¤ëª…:** M14AM10Aê°€ 70 ë¯¸ë§Œì¸ íšŸìˆ˜

---

```python
    features['m16rev_over_128'] = np.sum(seq_m16_rev > 128)
```
**ì„¤ëª…:** M16M14Aê°€ 128ì„ ë„˜ì€ íšŸìˆ˜

---

```python
    features['m16rev_over_136'] = np.sum(seq_m16_rev > 136)
```
**ì„¤ëª…:** M16M14Aê°€ 136ì„ ë„˜ì€ íšŸìˆ˜

---

### ìµœê·¼ 30ë¶„ ì„ê³„ê°’

```python
    features['m14b_over_517_last30'] = np.sum(seq_m14b[-30:] > 517)
```
**ì„¤ëª…:** ìµœê·¼ 30ë¶„ ì¤‘ M14AM14Bê°€ 517ì„ ë„˜ì€ íšŸìˆ˜
- ì˜ë¯¸: ìµœê·¼ ì¶”ì„¸

---

```python
    features['m14bsum_over_576_last30'] = np.sum(seq_m14b_sum[-30:] > 576)
```
**ì„¤ëª…:** ìµœê·¼ 30ë¶„ ì¤‘ M14AM14BSUMì´ 576ì„ ë„˜ì€ íšŸìˆ˜

---

```python
    features['gap_over_250_last30'] = np.sum(seq_queue_gap[-30:] > 250)
```
**ì„¤ëª…:** ìµœê·¼ 30ë¶„ ì¤‘ queue_gapì´ 250ì„ ë„˜ì€ íšŸìˆ˜

---

```python
    features['trans_over_151_last30'] = np.sum(seq_transport[-30:] > 151)
```
**ì„¤ëª…:** ìµœê·¼ 30ë¶„ ì¤‘ Transportê°€ 151ì„ ë„˜ì€ íšŸìˆ˜

---

**ì´ ì„ê³„ê°’ Features: 35ê°œ**

---

## 5. Feature ìƒì„± í•¨ìˆ˜ - í™©ê¸ˆ íŒ¨í„´ (303~337í–‰)

### í•„ìˆ˜ ì¡°ê±´

```python
    features['must_condition'] = 1 if (seq_m14b[-1] > 497 and seq_m14b_sum[-1] > 566) else 0
```
**ì„¤ëª…:** í•„ìˆ˜ ì¡°ê±´ ë§Œì¡± ì—¬ë¶€
- ì¡°ê±´: M14AM14B > 497 AND M14AM14BSUM > 566
- ë§Œì¡±í•˜ë©´ 1, ì•„ë‹ˆë©´ 0
- ì˜ë¯¸: ê¸°ë³¸ ìœ„í—˜ ì‹ í˜¸

---

### í™©ê¸ˆ íŒ¨í„´ 3ë‹¨ê³„

```python
    features['gold_strict'] = 1 if (seq_m14b[-1] > 520 and seq_m14b_sum[-1] > 588) else 0
```
**ì„¤ëª…:** ì—„ê²©í•œ í™©ê¸ˆ íŒ¨í„´
- ì¡°ê±´: M14AM14B > 520 AND M14AM14BSUM > 588
- ì˜ë¯¸: 1700+ í™•ë¥  85%! âš ï¸âš ï¸âš ï¸

---

```python
    features['gold_normal'] = 1 if (seq_m14b[-1] > 517 and seq_m14b_sum[-1] > 576) else 0
```
**ì„¤ëª…:** ë³´í†µ í™©ê¸ˆ íŒ¨í„´
- ì¡°ê±´: M14AM14B > 517 AND M14AM14BSUM > 576
- ì˜ë¯¸: 1700+ í™•ë¥  70% âš ï¸âš ï¸

---

```python
    features['gold_loose'] = 1 if (seq_m14b[-1] > 509 and seq_m14b_sum[-1] > 570) else 0
```
**ì„¤ëª…:** ëŠìŠ¨í•œ í™©ê¸ˆ íŒ¨í„´
- ì¡°ê±´: M14AM14B > 509 AND M14AM14BSUM > 570
- ì˜ë¯¸: 1700+ í™•ë¥  55% âš ï¸

---

### ìœ„í—˜ ì‹ í˜¸

```python
    features['danger_gap'] = 1 if seq_queue_gap[-1] > 300 else 0
```
**ì„¤ëª…:** queue_gap ìœ„í—˜ ì‹ í˜¸
- ì¡°ê±´: gap > 300
- ì˜ë¯¸: ì‘ì—…ì´ ë§ì´ ë°€ë¦¼!

---

```python
    features['danger_trans'] = 1 if seq_transport[-1] > 151 else 0
```
**ì„¤ëª…:** Transport ìœ„í—˜ ì‹ í˜¸
- ì¡°ê±´: transport > 151
- ì˜ë¯¸: ìš´ì†¡ ì§€ì—° ì‹¬ê°!

---

```python
    features['danger_oht'] = 1 if seq_oht[-1] > 84.6 else 0
```
**ì„¤ëª…:** OHT ìœ„í—˜ ì‹ í˜¸
- ì¡°ê±´: OHT ì‚¬ìš©ë¥  > 84.6%
- ì˜ë¯¸: ê±°ì˜ í’€ê°€ë™!

---

### ë³µí•© ì²´í¬

```python
    features['triple_check'] = 1 if (seq_m14b[-1] > 517 and seq_m14b_sum[-1] > 576 and seq_queue_gap[-1] > 250) else 0
```
**ì„¤ëª…:** 3ì¤‘ ì²´í¬
- ì¡°ê±´: í™©ê¸ˆíŒ¨í„´ + gap > 250
- ì˜ë¯¸: ë§¤ìš° ìœ„í—˜!

---

```python
    features['quad_check'] = 1 if (seq_m14b[-1] > 517 and seq_m14b_sum[-1] > 576 and seq_queue_gap[-1] > 250 and seq_transport[-1] > 145) else 0
```
**ì„¤ëª…:** 4ì¤‘ ì²´í¬
- ì¡°ê±´: í™©ê¸ˆíŒ¨í„´ + gap > 250 + transport > 145
- ì˜ë¯¸: í­ë°œ ìœ„í—˜! ğŸš¨

---

### TOTALCNT ìƒíƒœ

```python
    features['danger_1700'] = 1 if seq_totalcnt[-1] >= 1700 else 0
```
**ì„¤ëª…:** í˜„ì¬ 1700+ ì—¬ë¶€
- í˜„ì¬ TOTALCNTê°€ 1700 ì´ìƒì´ë©´ 1

---

```python
    features['danger_1600'] = 1 if seq_totalcnt[-1] >= 1600 else 0
```
**ì„¤ëª…:** í˜„ì¬ 1600+ ì—¬ë¶€

---

```python
    features['in_1700'] = 1 if seq_totalcnt[-1] >= 1700 else 0
```
**ì„¤ëª…:** 1700 êµ¬ê°„ ì—¬ë¶€ (danger_1700ê³¼ ë™ì¼)

---

### ì¶”ì„¸ íŒ¨í„´

```python
    features['rising_1700'] = 1 if (seq_totalcnt[-1] >= 1700 and seq_totalcnt[-1] - seq_totalcnt[-10] > 20) else 0
```
**ì„¤ëª…:** 1700+ ê¸‰ì¦ íŒ¨í„´
- ì¡°ê±´: 1700 ì´ìƒ AND 10ë¶„ ì „ë³´ë‹¤ 20 ì´ìƒ ì¦ê°€
- ì˜ë¯¸: í­ë°œì  ì¦ê°€ ì¤‘!

---

```python
    features['stable_1700'] = 1 if (seq_totalcnt[-1] >= 1700 and abs(seq_totalcnt[-1] - seq_totalcnt[-10]) <= 20) else 0
```
**ì„¤ëª…:** 1700+ ì•ˆì • íŒ¨í„´
- ì¡°ê±´: 1700 ì´ìƒ AND 10ë¶„ ì „ê³¼ ì°¨ì´ Â±20 ì´ë‚´
- abs(): ì ˆëŒ€ê°’
- ì˜ë¯¸: 1700ëŒ€ì—ì„œ ìœ ì§€ ì¤‘

---

```python
    features['falling_1700'] = 1 if (seq_totalcnt[-1] >= 1700 and seq_totalcnt[-1] - seq_totalcnt[-10] < -20) else 0
```
**ì„¤ëª…:** 1700+ í•˜ë½ íŒ¨í„´
- ì¡°ê±´: 1700 ì´ìƒ AND 10ë¶„ ì „ë³´ë‹¤ 20 ì´ìƒ ê°ì†Œ
- ì˜ë¯¸: 1700ëŒ€ì—ì„œ ë‚´ë ¤ì˜¤ëŠ” ì¤‘

---

### ì¶”ì„¸ ê°’

```python
    features['trend_10min'] = seq_totalcnt[-1] - seq_totalcnt[-10]
```
**ì„¤ëª…:** 10ë¶„ ì „ê³¼ì˜ ì°¨ì´
- ì˜ˆ: 1720 - 1680 = +40 (ì¦ê°€)
- ì˜ˆ: 1650 - 1700 = -50 (ê°ì†Œ)

---

```python
    features['trend_30min'] = seq_totalcnt[-1] - seq_totalcnt[-30]
```
**ì„¤ëª…:** 30ë¶„ ì „ê³¼ì˜ ì°¨ì´

---

### ë³µí•© ìœ„í—˜

```python
    features['high_m14b_low_m10a'] = 1 if (seq_m14b[-1] > 517 and seq_m10a[-1] < 80) else 0
```
**ì„¤ëª…:** M14BëŠ” ë§ì€ë° M10AëŠ” ì ìŒ
- ì˜ë¯¸: M14Bì— ëª°ë¦¼, M10AëŠ” ì ìŒ â†’ ë¶ˆê· í˜•!

---

```python
    features['high_gap_high_trans'] = 1 if (seq_queue_gap[-1] > 250 and seq_transport[-1] > 145) else 0
```
**ì„¤ëª…:** gapë„ í¬ê³  transportë„ ë§ìŒ
- ì˜ë¯¸: ë°€ë¦¼ + ì§€ì—° = ìµœì•…!

---

**ì´ í™©ê¸ˆ íŒ¨í„´ Features: 20ê°œ**

---

## 6. Feature ìƒì„± í•¨ìˆ˜ - ì‹œê°„ëŒ€ë³„ (338~366í–‰)

### ì‹œê°„ëŒ€ ë¶„í• 

```python
    q1 = seq_totalcnt[:70]
```
**ì„¤ëª…:** ì²« ë²ˆì§¸ 1/4 êµ¬ê°„ (0~69ë¶„)
- [:70]: ì²˜ìŒë¶€í„° 70ë²ˆì§¸ê¹Œì§€
- 280ë¶„ì„ 4ë“±ë¶„: 70ë¶„ì”©

---

```python
    q2 = seq_totalcnt[70:140]
```
**ì„¤ëª…:** ë‘ ë²ˆì§¸ 1/4 êµ¬ê°„ (70~139ë¶„)

---

```python
    q3 = seq_totalcnt[140:210]
```
**ì„¤ëª…:** ì„¸ ë²ˆì§¸ 1/4 êµ¬ê°„ (140~209ë¶„)

---

```python
    q4 = seq_totalcnt[210:280]
```
**ì„¤ëª…:** ë„¤ ë²ˆì§¸ 1/4 êµ¬ê°„ (210~279ë¶„)
- ê°€ì¥ ìµœê·¼ 70ë¶„

---

### êµ¬ê°„ë³„ í‰ê· 

```python
    features['q1_mean'] = np.mean(q1)
```
**ì„¤ëª…:** ì²« 70ë¶„ í‰ê· 
- ì˜ë¯¸: 4ì‹œê°„ 40ë¶„ ì „ ~ 3ì‹œê°„ 30ë¶„ ì „

---

```python
    features['q2_mean'] = np.mean(q2)
```
**ì„¤ëª…:** ë‘ ë²ˆì§¸ 70ë¶„ í‰ê· 

---

```python
    features['q3_mean'] = np.mean(q3)
```
**ì„¤ëª…:** ì„¸ ë²ˆì§¸ 70ë¶„ í‰ê· 

---

```python
    features['q4_mean'] = np.mean(q4)
```
**ì„¤ëª…:** ë„¤ ë²ˆì§¸ 70ë¶„ í‰ê·  (ìµœê·¼)
- ì˜ë¯¸: ìµœê·¼ 70ë¶„ í‰ê· 

---

### êµ¬ê°„ë³„ ì¶”ì„¸

```python
    features['q_trend_1_2'] = np.mean(q2) - np.mean(q1)
```
**ì„¤ëª…:** 1êµ¬ê°„ â†’ 2êµ¬ê°„ ë³€í™”ëŸ‰
- ì˜ˆ: 1350 - 1300 = +50 (ì¦ê°€)
- ì˜ë¯¸: ì´ˆë°˜ì—ì„œ ì¤‘ë°˜ìœ¼ë¡œ ë³€í™”

---

```python
    features['q_trend_2_3'] = np.mean(q3) - np.mean(q2)
```
**ì„¤ëª…:** 2êµ¬ê°„ â†’ 3êµ¬ê°„ ë³€í™”ëŸ‰

---

```python
    features['q_trend_3_4'] = np.mean(q4) - np.mean(q3)
```
**ì„¤ëª…:** 3êµ¬ê°„ â†’ 4êµ¬ê°„ ë³€í™”ëŸ‰
- ì˜ë¯¸: ìµœê·¼ ì¶”ì„¸ (ì¤‘ìš”!)

---

```python
    features['q_trend_overall'] = np.mean(q4) - np.mean(q1)
```
**ì„¤ëª…:** ì „ì²´ ì¶”ì„¸ (ì²« êµ¬ê°„ â†’ ë§ˆì§€ë§‰ êµ¬ê°„)
- ì˜ˆ: 1450 - 1300 = +150 (í° ì¦ê°€!)
- ì˜ë¯¸: ì „ì²´ì ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ì¦ê°€/ê°ì†Œí–ˆë‚˜?

---

### ë¹„ìœ¨ ë° ê°€ì†ë„

```python
    features['q4_vs_mean'] = np.mean(q4) / (np.mean(seq_totalcnt) + 1)
```
**ì„¤ëª…:** ìµœê·¼ 70ë¶„ í‰ê·  / ì „ì²´ 280ë¶„ í‰ê· 
- ì˜ˆ: 1450 / 1400 = 1.036 (3.6% ë†’ìŒ)
- ì˜ë¯¸: ìµœê·¼ì´ í‰ê· ë³´ë‹¤ ë†’ë‚˜?

---

```python
    features['q_accel'] = (np.mean(q4) - np.mean(q3)) - (np.mean(q3) - np.mean(q2))
```
**ì„¤ëª…:** ê°€ì†ë„ ê³„ì‚°
- ê³µì‹: (3â†’4 ë³€í™”) - (2â†’3 ë³€í™”)
- ì˜ˆ: (+70) - (+30) = +40 (ê°€ì†!)
- ì˜ˆ: (+30) - (+70) = -40 (ê°ì†)
- ì˜ë¯¸: ì¦ê°€ ì†ë„ê°€ ë¹¨ë¼ì§€ë‚˜? ëŠë ¤ì§€ë‚˜?

---

```python
    return features
```
**ì„¤ëª…:** ìƒì„±ëœ 222ê°œ Featureë¥¼ ë°˜í™˜

---

**ì´ ì‹œê°„ëŒ€ë³„ Features: 10ê°œ**

**Feature ìƒì„± í•¨ìˆ˜ ë!**
**ì´ 222ê°œ Feature ì™„ì„±!**

---

## 7. ë°ì´í„° ì¤€ë¹„ í•¨ìˆ˜ (365~427í–‰)

### í•¨ìˆ˜ ì‹œì‘

```python
def prepare_data(csv_path):
```
**ì„¤ëª…:** ë°ì´í„° ì¤€ë¹„ í•¨ìˆ˜
- ì…ë ¥: CSV íŒŒì¼ ê²½ë¡œ
- ì¶œë ¥: X (Features), y (íƒ€ê²Ÿ)

---

```python
    """ë°ì´í„° ë¡œë”© ë° Feature ìƒì„±"""
```
**ì„¤ëª…:** í•¨ìˆ˜ ì„¤ëª…

---

```python
    print(f"\nğŸ“‚ ë°ì´í„° ë¡œë”©: {csv_path}")
```
**ì„¤ëª…:** ë¡œë”© ì‹œì‘ ë©”ì‹œì§€ ì¶œë ¥
- f"...": f-string (ë³€ìˆ˜ ì‚½ì…)
- \n: ì¤„ë°”ê¿ˆ

---

```python
    df = pd.read_csv(csv_path)
```
**ì„¤ëª…:** CSV íŒŒì¼ì„ pandas ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ì½ê¸°
- df: ë°ì´í„°í”„ë ˆì„ (ì—‘ì…€ ê°™ì€ í‘œ)

---

```python
    print(f"âœ… {len(df):,}í–‰ Ã— {df.shape[1]}ì—´")
```
**ì„¤ëª…:** ë°ì´í„° í¬ê¸° ì¶œë ¥
- len(df): í–‰ ê°œìˆ˜
- df.shape[1]: ì—´ ê°œìˆ˜
- :,: ì²œ ë‹¨ìœ„ ì½¤ë§ˆ (43200 â†’ 43,200)

---

### í•„ìˆ˜ ì»¬ëŸ¼ í™•ì¸

```python
    required = [
        'CURRTIME', 'M14AM14B', 'M14AM14BSUM', 'M14BM14A',
        'M14AM10A', 'M10AM14A', 'M16M14A', 'M14AM16SUM', 'TOTALCNT',
        'M14.QUE.ALL.CURRENTQCREATED', 'M14.QUE.ALL.CURRENTQCOMPLETED',
        'M14.QUE.OHT.OHTUTIL', 'M14.QUE.ALL.TRANSPORT4MINOVERCNT'
    ]
```
**ì„¤ëª…:** í•„ìˆ˜ ì»¬ëŸ¼ ë¦¬ìŠ¤íŠ¸ ì •ì˜
- 13ê°œ ì»¬ëŸ¼ ì´ë¦„

---

```python
    missing = [c for c in required if c not in df.columns]
```
**ì„¤ëª…:** ëˆ„ë½ëœ ì»¬ëŸ¼ ì°¾ê¸°
- ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜
- requiredì—ëŠ” ìˆëŠ”ë° df.columnsì—ëŠ” ì—†ëŠ” ê²ƒ

---

```python
    if missing:
        print(f"âŒ í•„ìˆ˜ ì»¬ëŸ¼ ëˆ„ë½: {missing}")
        return None, None
```
**ì„¤ëª…:** ëˆ„ë½ëœ ì»¬ëŸ¼ì´ ìˆìœ¼ë©´
- ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥
- None, None ë°˜í™˜í•˜ê³  ì¢…ë£Œ

---

```python
    print("âœ… 13ê°œ ì»¬ëŸ¼ í™•ì¸ ì™„ë£Œ")
```
**ì„¤ëª…:** ëª¨ë“  ì»¬ëŸ¼ì´ ìˆìœ¼ë©´ ì„±ê³µ ë©”ì‹œì§€

---

### ì‹œê°„ ë³€í™˜

```python
    df['CURRTIME'] = pd.to_datetime(df['CURRTIME'].astype(str), format='%Y%m%d%H%M')
```
**ì„¤ëª…:** CURRTIMEì„ datetime í˜•ì‹ìœ¼ë¡œ ë³€í™˜
- astype(str): ë¬¸ìì—´ë¡œ ë³€í™˜
- format='%Y%m%d%H%M': 202508021430 í˜•ì‹
- ë³€í™˜ í›„: 2025-08-02 14:30:00

---

### Feature ìƒì„± ë£¨í”„

```python
    print(f"\nğŸ”„ Feature ìƒì„± ì¤‘...")
    X_list, y_list = [], []
```
**ì„¤ëª…:** Feature ìƒì„± ì‹œì‘
- X_list: Featureë“¤ì„ ì €ì¥í•  ë¦¬ìŠ¤íŠ¸
- y_list: íƒ€ê²Ÿê°’(10ë¶„ í›„ TOTALCNT)ì„ ì €ì¥í•  ë¦¬ìŠ¤íŠ¸

---

```python
    total = len(df) - 280 - 10
```
**ì„¤ëª…:** ìƒì„±í•  ìƒ˜í”Œ ê°œìˆ˜ ê³„ì‚°
- len(df): ì „ì²´ í–‰ ìˆ˜ (ì˜ˆ: 43,200)
- -280: ì²˜ìŒ 280ë¶„ì€ ì‹œí€€ìŠ¤ë¡œ ì‚¬ìš©
- -10: ë§ˆì§€ë§‰ 10ë¶„ì€ íƒ€ê²Ÿìœ¼ë¡œ ì‚¬ìš©
- ì˜ˆ: 43,200 - 280 - 10 = 42,910ê°œ

---

```python
    for i in range(280, len(df) - 10):
```
**ì„¤ëª…:** ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ë£¨í”„
- range(280, 43190): 280ë¶€í„° 43189ê¹Œì§€
- i: í˜„ì¬ ìœ„ì¹˜

---

```python
        row_dict = {
            'M14AM14B': df['M14AM14B'].iloc[i-280:i].values,
```
**ì„¤ëª…:** M14AM14Bì˜ 280ë¶„ ë°ì´í„° ì¶”ì¶œ
- iloc[i-280:i]: i-280ë¶€í„° i-1ê¹Œì§€
- .values: numpy ë°°ì—´ë¡œ ë³€í™˜
- ì˜ˆ: i=300ì´ë©´ iloc[20:300] â†’ 20~299í–‰

---

```python
            'M14AM14BSUM': df['M14AM14BSUM'].iloc[i-280:i].values,
            'M14BM14A': df['M14BM14A'].iloc[i-280:i].values,
            # ... (13ê°œ ì»¬ëŸ¼ ëª¨ë‘)
        }
```
**ì„¤ëª…:** ë‚˜ë¨¸ì§€ 12ê°œ ì»¬ëŸ¼ë„ ë™ì¼í•˜ê²Œ ì¶”ì¶œ

---

```python
        X_list.append(create_features_13col_optimized(row_dict))
```
**ì„¤ëª…:** Feature ìƒì„± í•¨ìˆ˜ í˜¸ì¶œí•˜ì—¬ X_listì— ì¶”ê°€
- create_features_13col_optimized(): 222ê°œ Feature ìƒì„±
- append(): ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€

---

```python
        y_list.append(df['TOTALCNT'].iloc[i+9])
```
**ì„¤ëª…:** 10ë¶„ í›„ TOTALCNTë¥¼ y_listì— ì¶”ê°€
- i+9: í˜„ì¬(i-1)ì—ì„œ 10ë¶„ í›„
- ì˜ˆ: i=300ì´ë©´ iloc[309] â†’ 10ë¶„ í›„

---

```python
        if (i - 280) % 1000 == 0:
            print(f"  {i-280:,}/{total:,} ({(i-280)/total*100:.1f}%)", end='\r')
```
**ì„¤ëª…:** ì§„í–‰ë¥  ì¶œë ¥ (1000ê°œë§ˆë‹¤)
- %: ë‚˜ë¨¸ì§€ ì—°ì‚°
- end='\r': ê°™ì€ ì¤„ì— ë®ì–´ì“°ê¸°
- ì˜ˆ: 1,000/42,910 (2.3%)

---

```python
    print(f"\nâœ… ì™„ë£Œ!")
```
**ì„¤ëª…:** Feature ìƒì„± ì™„ë£Œ ë©”ì‹œì§€

---

### DataFrame ë³€í™˜

```python
    X = pd.DataFrame(X_list)
```
**ì„¤ëª…:** X_listë¥¼ DataFrameìœ¼ë¡œ ë³€í™˜
- X_list: [{...}, {...}, ...] (ë”•ì…”ë„ˆë¦¬ ë¦¬ìŠ¤íŠ¸)
- X: DataFrame (í‘œ í˜•íƒœ)

---

```python
    y = pd.Series(y_list)
```
**ì„¤ëª…:** y_listë¥¼ Seriesë¡œ ë³€í™˜
- Series: 1ì°¨ì› ë°°ì—´

---

### ê²°ê³¼ ì¶œë ¥

```python
    print(f"\nğŸ“Š ê²°ê³¼:")
    print(f"  Feature: {X.shape[1]}ê°œ")
```
**ì„¤ëª…:** Feature ê°œìˆ˜ ì¶œë ¥
- X.shape[1]: ì—´ ê°œìˆ˜ = 222ê°œ

---

```python
    print(f"  ìƒ˜í”Œ: {len(X):,}ê°œ")
```
**ì„¤ëª…:** ìƒ˜í”Œ ê°œìˆ˜ ì¶œë ¥
- ì˜ˆ: 42,910ê°œ

---

```python
    print(f"  íƒ€ê²Ÿ ë²”ìœ„: {y.min():.0f}~{y.max():.0f}")
```
**ì„¤ëª…:** íƒ€ê²Ÿê°’(TOTALCNT)ì˜ ë²”ìœ„ ì¶œë ¥
- y.min(): ìµœì†Œê°’
- y.max(): ìµœëŒ€ê°’
- :.0f: ì†Œìˆ˜ì  ì—†ì´

---

```python
    print(f"  1700+: {(y>=1700).sum()}ê°œ ({(y>=1700).sum()/len(y)*100:.3f}%)")
```
**ì„¤ëª…:** 1700+ êµ¬ê°„ ê°œìˆ˜ì™€ ë¹„ìœ¨ ì¶œë ¥
- (y>=1700): True/False ë°°ì—´
- .sum(): Trueì˜ ê°œìˆ˜
- :.3f: ì†Œìˆ˜ì  3ìë¦¬

---

```python
    return X, y
```
**ì„¤ëª…:** X(Features)ì™€ y(íƒ€ê²Ÿ) ë°˜í™˜

---

## 8. ë°ì´í„° ì¦ê°• í•¨ìˆ˜ (432~451í–‰)

```python
def augment_data(X, y, threshold=1700, multiplier=50):
```
**ì„¤ëª…:** ë°ì´í„° ì¦ê°• í•¨ìˆ˜
- X: Features
- y: íƒ€ê²Ÿ
- threshold: ì¦ê°• ì„ê³„ê°’ (1700)
- multiplier: ì¦ê°• ë°°ìˆ˜ (ë‚˜ì¤‘ì— 90ìœ¼ë¡œ ë³€ê²½)

---

```python
    """ğŸ”¥ 1700+ ë°ì´í„° 50ë°° ì¦ê°•!"""
```
**ì„¤ëª…:** í•¨ìˆ˜ ì„¤ëª…

---

```python
    print(f"\nğŸ”¥ 1700+ ë°ì´í„° {multiplier}ë°° ì¦ê°• (ê°•ë ¥!)")
```
**ì„¤ëª…:** ì¦ê°• ì‹œì‘ ë©”ì‹œì§€

---

```python
    high_mask = y >= threshold
```
**ì„¤ëª…:** 1700 ì´ìƒì¸ ë°ì´í„° ì°¾ê¸°
- high_mask: [False, False, True, False, ...] 
- True: 1700 ì´ìƒ

---

```python
    count = high_mask.sum()
```
**ì„¤ëª…:** 1700+ ê°œìˆ˜ ì„¸ê¸°
- Trueì˜ ê°œìˆ˜

---

```python
    print(f"1700+ ì›ë³¸: {count:,}ê°œ")
```
**ì„¤ëª…:** ì›ë³¸ 1700+ ê°œìˆ˜ ì¶œë ¥
- ì˜ˆ: 467ê°œ

---

```python
    if count == 0:
        print("âš ï¸ ì¦ê°• ë¶ˆê°€")
        return X, y
```
**ì„¤ëª…:** 1700+ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì¦ê°• ì•ˆ í•¨

---

```python
    X_aug = pd.concat([X] + [X[high_mask]] * (multiplier - 1), ignore_index=True)
```
**ì„¤ëª…:** Xë¥¼ ì¦ê°•
- X: ì›ë³¸ ì „ì²´
- X[high_mask]: 1700+ ë°ì´í„°ë§Œ
- [X[high_mask]] * (multiplier - 1): 89ë²ˆ ë³µì‚¬
- pd.concat(): í•©ì¹˜ê¸°
- ì˜ˆ: ì›ë³¸ + 1700+ë°ì´í„°Ã—89 = ì¦ê°• ì™„ë£Œ

---

```python
    y_aug = pd.concat([y] + [y[high_mask]] * (multiplier - 1), ignore_index=True)
```
**ì„¤ëª…:** yë„ ë™ì¼í•˜ê²Œ ì¦ê°•

---

```python
    print(f"ì¦ê°• í›„: {len(X_aug):,}ê°œ")
```
**ì„¤ëª…:** ì¦ê°• í›„ ì´ ê°œìˆ˜ ì¶œë ¥

---

```python
    print(f"1700+ ë¹„ìœ¨: {(y_aug>=threshold).sum()/len(y_aug)*100:.2f}%")
```
**ì„¤ëª…:** ì¦ê°• í›„ 1700+ ë¹„ìœ¨ ì¶œë ¥
- ì˜ˆ: 49.33% (ê±°ì˜ ì ˆë°˜!)

---

```python
    return X_aug, y_aug
```
**ì„¤ëª…:** ì¦ê°•ëœ ë°ì´í„° ë°˜í™˜

---

## 9. í•™ìŠµ í•¨ìˆ˜ (456~479í–‰)

```python
def train_model(X, y):
```
**ì„¤ëª…:** XGBoost í•™ìŠµ í•¨ìˆ˜

---

```python
    """XGBoost í•™ìŠµ"""
```
**ì„¤ëª…:** í•¨ìˆ˜ ì„¤ëª…

---

```python
    print(f"\nğŸš€ XGBoost í•™ìŠµ")
```
**ì„¤ëª…:** í•™ìŠµ ì‹œì‘ ë©”ì‹œì§€

---

```python
    model = xgb.XGBRegressor(
```
**ì„¤ëª…:** XGBoost íšŒê·€ ëª¨ë¸ ìƒì„±

---

```python
        objective='reg:squarederror',
```
**ì„¤ëª…:** ëª©ì  í•¨ìˆ˜ ì„¤ì •
- íšŒê·€(regression)
- ì œê³± ì˜¤ì°¨ ìµœì†Œí™”

---

```python
        max_depth=8,
```
**ì„¤ëª…:** íŠ¸ë¦¬ ìµœëŒ€ ê¹Šì´
- 8: 2^8 = 256ê°œê¹Œì§€ ë¶„ê¸° ê°€ëŠ¥
- ê¹Šì„ìˆ˜ë¡ ë³µì¡, ì–•ì„ìˆ˜ë¡ ë‹¨ìˆœ

---

```python
        learning_rate=0.05,
```
**ì„¤ëª…:** í•™ìŠµë¥ 
- 0.05: ì²œì²œíˆ í•™ìŠµ (ì•ˆì •ì )
- ë‚®ì„ìˆ˜ë¡ ëŠë¦¬ì§€ë§Œ ì •í™•

---

```python
        n_estimators=500,
```
**ì„¤ëª…:** íŠ¸ë¦¬ ê°œìˆ˜
- 500ê°œ íŠ¸ë¦¬ ìƒì„±
- ë§ì„ìˆ˜ë¡ ì •í™•í•˜ì§€ë§Œ ëŠë¦¼

---

```python
        subsample=0.8,
```
**ì„¤ëª…:** ìƒ˜í”Œë§ ë¹„ìœ¨
- 0.8: ì „ì²´ ë°ì´í„°ì˜ 80%ë§Œ ì‚¬ìš©
- ê³¼ì í•© ë°©ì§€

---

```python
        colsample_bytree=0.8,
```
**ì„¤ëª…:** Feature ìƒ˜í”Œë§ ë¹„ìœ¨
- 0.8: 222ê°œ ì¤‘ 80% (ì•½ 178ê°œ)ë§Œ ì‚¬ìš©
- ê³¼ì í•© ë°©ì§€

---

```python
        min_child_weight=3,
```
**ì„¤ëª…:** ë¦¬í”„ ë…¸ë“œ ìµœì†Œ ê°€ì¤‘ì¹˜
- 3: ìµœì†Œ 3ê°œ ìƒ˜í”Œ í•„ìš”
- ê³¼ì í•© ë°©ì§€

---

```python
        gamma=0.1,
```
**ì„¤ëª…:** ë¶„í•  ìµœì†Œ ì†ì‹¤
- 0.1: ì´ë“ì´ 0.1 ì´ìƒì¼ ë•Œë§Œ ë¶„í• 
- ê³¼ì í•© ë°©ì§€

---

```python
        reg_alpha=0.1,
```
**ì„¤ëª…:** L1 ì •ê·œí™”
- 0.1: ì•½í•œ ì •ê·œí™”
- Feature ì„ íƒ íš¨ê³¼

---

```python
        reg_lambda=1.0,
```
**ì„¤ëª…:** L2 ì •ê·œí™”
- 1.0: í‘œì¤€ ì •ê·œí™”
- ê°€ì¤‘ì¹˜ í¬ê¸° ì œí•œ

---

```python
        random_state=42,
```
**ì„¤ëª…:** ë‚œìˆ˜ ì‹œë“œ
- 42: ì¬í˜„ì„± ë³´ì¥
- ê°™ì€ ê²°ê³¼ ë°˜ë³µ

---

```python
        n_jobs=-1,
```
**ì„¤ëª…:** CPU ì½”ì–´ ì‚¬ìš© ê°œìˆ˜
- -1: ëª¨ë“  ì½”ì–´ ì‚¬ìš©
- í•™ìŠµ ì†ë„ í–¥ìƒ

---

```python
        tree_method='hist'
```
**ì„¤ëª…:** íŠ¸ë¦¬ ìƒì„± ë°©ë²•
- 'hist': íˆìŠ¤í† ê·¸ë¨ ê¸°ë°˜
- ë¹ ë¥¸ ì†ë„

---

```python
    )
```
**ì„¤ëª…:** ëª¨ë¸ ì„¤ì • ë

---

```python
    model.fit(X, y, verbose=50)
```
**ì„¤ëª…:** ëª¨ë¸ í•™ìŠµ
- X: Features (222ê°œ)
- y: íƒ€ê²Ÿ (10ë¶„ í›„ TOTALCNT)
- verbose=50: 50 iterationë§ˆë‹¤ ì¶œë ¥

---

```python
    print(f"\nâœ… í•™ìŠµ ì™„ë£Œ!")
```
**ì„¤ëª…:** í•™ìŠµ ì™„ë£Œ ë©”ì‹œì§€

---

```python
    return model
```
**ì„¤ëª…:** í•™ìŠµëœ ëª¨ë¸ ë°˜í™˜

---

## 10. í‰ê°€ í•¨ìˆ˜ (484~517í–‰)

```python
def evaluate(model, X, y):
```
**ì„¤ëª…:** ì„±ëŠ¥ í‰ê°€ í•¨ìˆ˜

---

```python
    """ì„±ëŠ¥ í‰ê°€"""
```
**ì„¤ëª…:** í•¨ìˆ˜ ì„¤ëª…

---

```python
    print(f"\n" + "="*80)
    print(f"ğŸ“Š ì„±ëŠ¥ í‰ê°€")
    print("="*80)
```
**ì„¤ëª…:** í‰ê°€ ì‹œì‘ ë©”ì‹œì§€ (êµ¬ë¶„ì„  í¬í•¨)

---

```python
    y_pred = model.predict(X)
```
**ì„¤ëª…:** ì˜ˆì¸¡ ìˆ˜í–‰
- model.predict(): í•™ìŠµëœ ëª¨ë¸ë¡œ ì˜ˆì¸¡
- X: Features
- y_pred: ì˜ˆì¸¡ê°’

---

```python
    mae = mean_absolute_error(y, y_pred)
```
**ì„¤ëª…:** MAE ê³„ì‚°
- Mean Absolute Error (í‰ê·  ì ˆëŒ€ ì˜¤ì°¨)
- |ì‹¤ì œê°’ - ì˜ˆì¸¡ê°’|ì˜ í‰ê· 

---

```python
    rmse = np.sqrt(mean_squared_error(y, y_pred))
```
**ì„¤ëª…:** RMSE ê³„ì‚°
- Root Mean Squared Error
- np.sqrt(): ì œê³±ê·¼
- (ì‹¤ì œê°’ - ì˜ˆì¸¡ê°’)^2ì˜ í‰ê· ì˜ ì œê³±ê·¼

---

```python
    r2 = r2_score(y, y_pred)
```
**ì„¤ëª…:** RÂ² ê³„ì‚°
- ê²°ì •ê³„ìˆ˜ (0~1)
- 1ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì •í™•

---

```python
    print(f"\nì „ì²´:")
    print(f"  MAE:  {mae:.2f}")
    print(f"  RMSE: {rmse:.2f}")
    print(f"  RÂ²:   {r2:.4f}")
```
**ì„¤ëª…:** ì „ì²´ ì„±ëŠ¥ ì¶œë ¥
- :.2f: ì†Œìˆ˜ì  2ìë¦¬
- :.4f: ì†Œìˆ˜ì  4ìë¦¬

---

```python
    high = y >= 1700
```
**ì„¤ëª…:** 1700+ ë°ì´í„° í•„í„°

---

```python
    if high.sum() > 0:
```
**ì„¤ëª…:** 1700+ ë°ì´í„°ê°€ ìˆìœ¼ë©´

---

```python
        mae_h = mean_absolute_error(y[high], y_pred[high])
```
**ì„¤ëª…:** 1700+ êµ¬ê°„ë§Œì˜ MAE ê³„ì‚°

---

```python
        detected = ((y >= 1700) & (y_pred >= 1680)).sum()
```
**ì„¤ëª…:** 1700+ ê°ì§€ ì„±ê³µ ê°œìˆ˜
- y >= 1700: ì‹¤ì œ 1700+
- y_pred >= 1680: ì˜ˆì¸¡ 1680+ (ì—¬ìœ ìˆê²Œ)
- &: AND ì—°ì‚°
- ë‘˜ ë‹¤ ë§Œì¡±: ê°ì§€ ì„±ê³µ!

---

```python
        rate = detected / high.sum() * 100
```
**ì„¤ëª…:** ê°ì§€ìœ¨ ê³„ì‚°
- (ê°ì§€ ì„±ê³µ / ì „ì²´ 1700+) Ã— 100

---

```python
        print(f"\n1700+:")
        print(f"  ìƒ˜í”Œ: {high.sum():,}ê°œ")
        print(f"  MAE: {mae_h:.2f}")
        print(f"  ê°ì§€ìœ¨ (1680+): {rate:.1f}% ({detected:,}/{high.sum():,})")
        print(f"  í‰ê·  ì˜ˆì¸¡: {y_pred[high].mean():.1f}")
        print(f"  ìµœì†Œ ì˜ˆì¸¡: {y_pred[high].min():.1f}")
        print(f"  ìµœëŒ€ ì˜ˆì¸¡: {y_pred[high].max():.1f}")
```
**ì„¤ëª…:** 1700+ êµ¬ê°„ ìƒì„¸ ì •ë³´ ì¶œë ¥

---

```python
    print("="*80)
    return mae, rmse, r2
```
**ì„¤ëª…:** í‰ê°€ ê²°ê³¼ ë°˜í™˜

---

## 11. Feature ì¤‘ìš”ë„ í•¨ìˆ˜ (522~533í–‰)

```python
def show_importance(model, X):
```
**ì„¤ëª…:** Feature ì¤‘ìš”ë„ ì¶œë ¥ í•¨ìˆ˜

---

```python
    """TOP 30 Feature ì¤‘ìš”ë„"""
```
**ì„¤ëª…:** í•¨ìˆ˜ ì„¤ëª…

---

```python
    print(f"\n" + "="*80)
    print(f"ğŸ† Feature ì¤‘ìš”ë„ TOP 30")
    print("="*80)
```
**ì„¤ëª…:** ì¤‘ìš”ë„ ì¶œë ¥ ì‹œì‘

---

```python
    imp = pd.DataFrame({
        'feature': X.columns,
        'importance': model.feature_importances_
    }).sort_values('importance', ascending=False)
```
**ì„¤ëª…:** Feature ì¤‘ìš”ë„ DataFrame ìƒì„±
- X.columns: Feature ì´ë¦„ë“¤
- model.feature_importances_: XGBoostê°€ ê³„ì‚°í•œ ì¤‘ìš”ë„
- sort_values(): ì¤‘ìš”ë„ ìˆœìœ¼ë¡œ ì •ë ¬
- ascending=False: ë‚´ë¦¼ì°¨ìˆœ (í° ê²ƒë¶€í„°)

---

```python
    print(imp.head(30).to_string(index=False))
```
**ì„¤ëª…:** ìƒìœ„ 30ê°œ ì¶œë ¥
- .head(30): ìƒìœ„ 30ê°œ
- .to_string(index=False): ì¸ë±ìŠ¤ ì—†ì´ ë¬¸ìì—´ë¡œ

---

## 12. ë©”ì¸ ì‹¤í–‰ (538~573í–‰)

```python
if __name__ == '__main__':
```
**ì„¤ëª…:** ë©”ì¸ ì‹¤í–‰ë¶€
- ì´ íŒŒì¼ì„ ì§ì ‘ ì‹¤í–‰í•  ë•Œë§Œ ì•„ë˜ ì½”ë“œ ì‹¤í–‰
- importë¡œ ë¶ˆëŸ¬ì˜¤ë©´ ì‹¤í–‰ ì•ˆ ë¨

---

```python
    CSV_FILE = "data/M14_Q_20250802_TO_20251015.csv"
```
**ì„¤ëª…:** CSV íŒŒì¼ ê²½ë¡œ ì„¤ì •

---

```python
    X, y = prepare_data(CSV_FILE)
```
**ì„¤ëª…:** ë°ì´í„° ì¤€ë¹„ í•¨ìˆ˜ í˜¸ì¶œ
- CSV ë¡œë“œ â†’ Feature ìƒì„±
- X: 222ê°œ Feature
- y: íƒ€ê²Ÿ (10ë¶„ í›„ TOTALCNT)

---

```python
    if X is None:
        exit(1)
```
**ì„¤ëª…:** ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì¢…ë£Œ
- exit(1): ì—ëŸ¬ ì½”ë“œ 1ë¡œ ì¢…ë£Œ

---

```python
    X_aug, y_aug = augment_data(X, y, threshold=1700, multiplier=90)
```
**ì„¤ëª…:** ë°ì´í„° ì¦ê°•
- threshold=1700: 1700 ì´ìƒë§Œ
- multiplier=90: 90ë°° ì¦ê°•
- ì£¼ì„ì— #50-->100 ìˆì§€ë§Œ ì‹¤ì œëŠ” 90

---

```python
    model = train_model(X_aug, y_aug)
```
**ì„¤ëª…:** ëª¨ë¸ í•™ìŠµ
- ì¦ê°•ëœ ë°ì´í„°ë¡œ í•™ìŠµ

---

```python
    mae, rmse, r2 = evaluate(model, X_aug, y_aug)
```
**ì„¤ëª…:** ì„±ëŠ¥ í‰ê°€

---

```python
    show_importance(model, X_aug)
```
**ì„¤ëª…:** Feature ì¤‘ìš”ë„ ì¶œë ¥

---

```python
    with open('model_13col_final.pkl', 'wb') as f:
        pickle.dump(model, f)
```
**ì„¤ëª…:** ëª¨ë¸ ì €ì¥
- 'wb': ì“°ê¸° ëª¨ë“œ (write binary)
- pickle.dump(): ëª¨ë¸ ì €ì¥

---

```python
    with open('features_13col_final.pkl', 'wb') as f:
        pickle.dump(list(X.columns), f)
```
**ì„¤ëª…:** Feature ì´ë¦„ ì €ì¥
- X.columns: Feature ì´ë¦„ë“¤
- list(): ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜

---

```python
    print(f"\nğŸ’¾ ì €ì¥:")
    print(f"  model_13col_final.pkl")
    print(f"  features_13col_final.pkl")
```
**ì„¤ëª…:** ì €ì¥ ì™„ë£Œ ë©”ì‹œì§€

---

```python
    print(f"\n" + "="*80)
    print(f"âœ… ì™„ë£Œ! multiplier=90")
    print(f"Feature: {X.shape[1]}ê°œ")
    print(f"MAE: {mae:.2f}, RÂ²: {r2:.4f}")
    print("="*80)
```
**ì„¤ëª…:** ìµœì¢… ìš”ì•½ ì¶œë ¥
- Feature ê°œìˆ˜
- ì„±ëŠ¥ ì§€í‘œ (MAE, RÂ²)

---

## ğŸ¯ ì „ì²´ íë¦„ ìš”ì•½

```
1. CSV ë¡œë“œ
   â†“
2. 280ë¶„ ì‹œí€€ìŠ¤ â†’ 222ê°œ Feature ìƒì„±
   (42,910ê°œ ìƒ˜í”Œ)
   â†“
3. 1700+ ë°ì´í„° 90ë°° ì¦ê°•
   (467ê°œ â†’ 42,003ê°œ)
   â†“
4. XGBoost í•™ìŠµ
   (500 iterations)
   â†“
5. ì„±ëŠ¥ í‰ê°€
   (MAE, RÂ², 1700+ ê°ì§€ìœ¨)
   â†“
6. ëª¨ë¸ ì €ì¥
   (model_13col_final.pkl)
```

---

## ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸

### 1. Feature ìƒì„± (ê°€ì¥ ì¤‘ìš”!)
- 13ê°œ ì»¬ëŸ¼ Ã— 280ë¶„ â†’ 222ê°œ Feature
- ê¸°ë³¸ í†µê³„(130) + Interaction(30) + ì„ê³„ê°’(35) + í™©ê¸ˆ íŒ¨í„´(20) + ì‹œê°„ëŒ€ë³„(10)

### 2. ë°ì´í„° ì¦ê°•
- 1700+ ë°ì´í„° 90ë°° ì¦ê°•
- ì´ìœ : 1700+ ë°ì´í„°ê°€ 1.1%ë¡œ ë„ˆë¬´ ì ìŒ

### 3. XGBoost í•™ìŠµ
- 500ê°œ íŠ¸ë¦¬, ê¹Šì´ 8
- ì •ê·œí™”ë¡œ ê³¼ì í•© ë°©ì§€

### 4. ì„±ëŠ¥ í‰ê°€
- MAE: í‰ê·  ì ˆëŒ€ ì˜¤ì°¨
- RÂ²: ê²°ì •ê³„ìˆ˜
- 1700+ ê°ì§€ìœ¨: ê°€ì¥ ì¤‘ìš”!

---

**ğŸ“… ì‘ì„±ì¼:** 2024-11-06  
**âœï¸ ì‘ì„±:** ì¡´ í¬ë ˆìŠ¤íŠ¸  
**ğŸ“§ ë¬¸ì˜:** í”„ë¡œì íŠ¸ ë‹´ë‹¹ì

---