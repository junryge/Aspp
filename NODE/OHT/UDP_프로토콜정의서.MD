# UDP 프로토콜 @ ID:2; Vehicle 상태 보고(OCS → OSS)

---

## 1. 기본 데이터 항목

| 데이터 항목 | 내용 |
|------------|------|
| **텍스트 ID** | 2 |
| **MCP 명칭** | 각 MCP7의 명칭(유니크) |
| **Vehicle 명** | Vehicle 식별하기 위한 명칭 |

---

## 2. 상태 코드

| 코드 | 상태 |
|------|------|
| "1" | 운전 중 |
| "2" | 정지 중 |
| "3" | 이상 |
| "4" | 수동 |
| "5" | 수출 중 |
| "6" | OBS-STOP/BZ-STOP |
| "7" | 정체 |
| "9" | E84 Timeout |
| "10" | 주회 없음 E84 Timeout |
| "11" | HT-STOP |

---

## 3. 재하 정보

| 코드 | 내용 |
|------|------|
| "0" | 재하 없음 |
| "1" | 재하 있음 |

---

## 4. Error Code

- **범위**: "0000" ~ "FFFF"
- **비고**: 상태가 "3" 이외인 경우 "0000"을 설정한다

---

## 5. 통신 상태

| 코드 | 내용 |
|------|------|
| "1" | 정상 |
| "2" | 통신 끊김 |

---

## 6. 위치 정보

| 항목 | 설명 |
|------|------|
| **현재 번지** | 현재 번지를 알 수 없는 경우 아무것도 설정되지 않음 |
| **현재번지로부터의 거리** | 현재 번지로부터의 거리(100mm 단위). 현재 번지를 알 수 없는 경우 아무것도 설정되지 않음 |
| **다음번지** | 다음 번지를 알 수 없는 경우 아무것도 설정되지 않음 |

---

## 7. 실행 Cycle

| 코드 | 내용 |
|------|------|
| "0" | Cycle 없음 |
| "1" | 위치 확인 Cycle 중 |
| "2" | 이동 Cycle 중 |
| "3" | Unload Cycle 중 |
| "4" | Load Cycle 중 |
| "5" | 수출 Cycle 중 |
| "9" | 승간 이동 Cycle 중 |
| "21" | 주회 주행 Cycle 중 |

---

## 8. Vehicle 실행 Cycle 진척

> ※ 실행 Cycle이 "0"~"5"인 경우만 유효, 그 외에는 아무것도 설정되지 않음

| 코드 | 내용 |
|------|------|
| "0" | 실행 Cycle 없음 |
| "1" | 이동 중 |
| "2" | Unload 이동 중 |
| "3" | Unload 이재 중 |
| "4" | Load 이동 중 |
| "5" | Load 이재 중 |
| "7" | 대체 지시 대기 |

---

## 9. Carrier/Destination 정보

| 항목 | 설명 |
|------|------|
| **Carrier ID** | 현재 반송 중, 반송 예정 Carrier ID. 관련 Carrier ID가 없는 경우는 아무것도 설정되지 않음 |
| **Destination** | 목적지 Station 번호. 목적지 Station이 없거나 알 수 없는 경우에는 아무것도 설정되지 않음 |

---

## 10. E/M 상태

- **기본값**: "0000000"
- **설명**: E/M 상태를 Bit 배치로 설정
- **포함 항목**:
  - 방전 표시
  - 작동 가능 출력
  - 배터리 수명
  - Refresh 충전 요구
  - 배터리 용량 Warning

---

## 11. GroupID

- **표현**: GroupName으로 표현
- **유효 문자열**: ["A"~"Z"]["a"~"z"]["0"~"9"]
- **기본값**: GroupID가 없는 경우 "0000"으로 설정

---

## 12. Port 정보

| 항목 | 설명 |
|------|------|
| **반송원 Port** | 반송원 Port ID. 관련 Port ID가 없으면 아무것도 설정되지 않음 |
| **반송처 Port** | 반송처 Port ID. 관련 Port ID가 없으면 아무것도 설정되지 않음 |

---

## 13. 반송 우선도

| 값 | 설명 |
|----|------|
| 0~99 | 범위 |
| "0" | 무효 |
| "1" | 최저 우선순위 |
| "99" | 최고 우선순위 |

---

## 14. 작업 상태 상세

> ※ 실행 Cycle이 "0":Cycle 없음 또는 "2":이동 Cycle 중인 경우에만 유효

| 코드 | 내용 |
|------|------|
| "0" | 작업 없음 |
| "1" | 대기 중 |
| "2" | STAGE 대기 중 |
| "3" | Standby 대기 중 |
| "4" | 반송 Load 허가 없음 대기 중 |
| "5" | Carrier 회수 대기 대기 중 |
| "6" | MAP 전송 대기 중 |
| "101" | 이동 중 |
| "102" | Parking UTS 주행 중 |
| "103" | STAGE 이동 중 |
| "104" | Standby 이동 중 |
| "105" | Balance에 의해 이동 중 |
| "106" | Parking에 의해 이동 중 |
| "107" | Forecast 이동 중 (Config 설정에서 활성화/비활성화 설정 가능) |
| "108" | 세차 이동 중 (Config 설정에서 활성화/비활성화 설정 가능) |

---

## 15. 추가 항목

| 항목 | 설명 |
|------|------|
| **대차 주행거리** | 대차가 Cycle 개시 후/주행로 변경 후부터 도착까지 주행한 거리(mm). 대차가 목적지에 도착했을 때 Set. 도착 이외의 상태, 주행하지 않은 경우, 주행거리 불명인 경우 0이 설정됨 |
| **Command ID** | 반송 Command ID |
| **Bay 명칭** | VHL 현재 위치의 Bay 명칭 |
| **도착 예상 시간(ETA)** | 경로 확정 시 VHL 도착 예상시간(msec). ※도착 예상 시간은 경로 확정 시 시간으로 실시간 갱신되지 않음 |
| **예약 Command ID** | 예약 중인 반송 Command ID (Config 설정에서 활성화/비활성화 설정 가능) |

---

*문서 작성일: 2025.01*
*출처: UDP 프로토콜 @ ID:2; Vehicle 상태 보고(OCS → OSS)*