<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATLAS_HID_INOUT ÌÖåÏù¥Î∏î Î™ÖÏÑ∏ÏÑú</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e4e4e4;
            line-height: 1.6;
            padding: 40px 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #00d4ff;
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 40px;
            font-size: 0.95rem;
        }
        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        .section h2 {
            color: #00d4ff;
            font-size: 1.3rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .section h2 .num {
            background: #00d4ff;
            color: #1a1a2e;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .section h3 {
            color: #ffa657;
            font-size: 1.1rem;
            margin: 25px 0 15px 0;
            padding-left: 10px;
            border-left: 3px solid #ffa657;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        th {
            background: rgba(0, 212, 255, 0.15);
            color: #00d4ff;
            font-weight: 600;
            font-size: 0.9rem;
        }
        td {
            font-size: 0.9rem;
        }
        tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        .info-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
        }
        .info-item .label {
            color: #888;
            font-size: 0.85rem;
            margin-bottom: 5px;
        }
        .info-item .value {
            color: #fff;
            font-weight: 500;
        }
        .code-block {
            background: #0d1117;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            border: 1px solid #30363d;
        }
        .code-block pre {
            margin: 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            line-height: 1.5;
        }
        .code-block .comment {
            color: #8b949e;
        }
        .code-block .keyword {
            color: #ff7b72;
        }
        .code-block .string {
            color: #a5d6ff;
        }
        .code-block .method {
            color: #d2a8ff;
        }
        .code-block .class {
            color: #7ee787;
        }
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        .badge-in {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }
        .badge-out {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
        }
        .badge-table {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
        }
        .badge-new {
            background: rgba(255, 51, 102, 0.3);
            color: #ff3366;
            animation: pulse 2s infinite;
        }
        .badge-existing {
            background: rgba(168, 85, 247, 0.2);
            color: #a855f7;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .query-block {
            background: #0d1117;
            border-radius: 8px;
            padding: 15px 20px;
            margin-top: 15px;
            border-left: 3px solid #00d4ff;
        }
        .query-block .query-title {
            color: #00d4ff;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }
        .query-block code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            color: #c9d1d9;
            display: block;
            white-space: pre-wrap;
        }
        .highlight {
            color: #ffa657;
        }
        .api-box {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 255, 136, 0.1));
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .api-box code {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 15px;
            border-radius: 6px;
            display: block;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            color: #7ee787;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .comparison-box {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .comparison-box h4 {
            color: #00d4ff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .footer {
            text-align: center;
            color: #666;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        .table-orange th {
            background: rgba(255, 166, 87, 0.15);
            color: #ffa657;
        }
        @media (max-width: 768px) {
            .info-grid, .comparison-grid {
                grid-template-columns: 1fr;
            }
            th, td {
                padding: 10px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä ATLAS HID ÌÖåÏù¥Î∏î Î™ÖÏÑ∏ÏÑú</h1>
        <p class="subtitle">OHT HID Íµ¨Ïó≠ Í¥ÄÎ†® Logpresso ÌÖåÏù¥Î∏î Ï†ïÏùòÏÑú</p>

        <!-- 1. ÌÖåÏù¥Î∏î Í∞úÏöî -->
        <div class="section">
            <h2><span class="num">1</span> ÌÖåÏù¥Î∏î Í∞úÏöî</h2>
            <div class="comparison-grid">
                <div class="comparison-box">
                    <h4><span class="badge badge-existing">Í∏∞Ï°¥</span> ATLAS_RAIL_TRAFFIC</h4>
                    <div class="info-item">
                        <div class="label">Î™©Ï†Å</div>
                        <div class="value">RailEdgeÎ≥Ñ Ìä∏ÎûòÌîΩ Ï†ïÎ≥¥ (1Î∂Ñ Î∞∞Ïπò)</div>
                    </div>
                    <div class="info-item" style="margin-top: 10px;">
                        <div class="label">Ï†ÄÏû•ÏÜåÏä§</div>
                        <div class="value">TrafficBatch.java</div>
                    </div>
                    <div class="info-item" style="margin-top: 10px;">
                        <div class="label">Ï£ºÍ∏∞</div>
                        <div class="value">1Î∂Ñ Î∞∞Ïπò</div>
                    </div>
                </div>
                <div class="comparison-box">
                    <h4><span class="badge badge-new">NEW</span> ATLAS_HID_INOUT</h4>
                    <div class="info-item">
                        <div class="label">Î™©Ï†Å</div>
                        <div class="value">HID Íµ¨Ïó≠ IN/OUT Ïù¥Î≤§Ìä∏ Í∏∞Î°ù</div>
                    </div>
                    <div class="info-item" style="margin-top: 10px;">
                        <div class="label">Ï†ÄÏû•ÏÜåÏä§</div>
                        <div class="value">OhtMsgWorkerRunnable.java</div>
                    </div>
                    <div class="info-item" style="margin-top: 10px;">
                        <div class="label">Ï£ºÍ∏∞</div>
                        <div class="value">Ïã§ÏãúÍ∞Ñ (Ïù¥Î≤§Ìä∏ Î∞úÏÉù Ïãú)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. ATLAS_RAIL_TRAFFIC (Í∏∞Ï°¥) -->
        <div class="section">
            <h2><span class="num">2</span> ATLAS_RAIL_TRAFFIC <span class="badge badge-existing">Í∏∞Ï°¥ ÌÖåÏù¥Î∏î</span></h2>
            
            <div class="api-box">
                <code>Util.insertInLogpressoDatabase(logpressoData, "ATLAS_RAIL_TRAFFIC", this.getClass().getSimpleName());</code>
            </div>

            <h3>Ïª¨Îüº Ï†ïÏùò</h3>
            <table class="table-orange">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Ïª¨ÎüºÎ™Ö</th>
                        <th>ÌÉÄÏûÖ</th>
                        <th>ÏÉòÌîåÍ∞í</th>
                        <th>ÏÑ§Î™Ö</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td><strong>createTime</strong></td>
                        <td>long</td>
                        <td>1706512800000</td>
                        <td>Î∞∞Ïπò Ïã§Ìñâ ÏãúÍ∞Ñ (ms)</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><strong>railEdgeId</strong></td>
                        <td>String</td>
                        <td>M14A:RE:A:00001:00002</td>
                        <td>Î†àÏùº Íµ¨Í∞Ñ ID</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><strong>fabId</strong></td>
                        <td>String</td>
                        <td>M14A</td>
                        <td>FAB ID</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td><strong>mcpName</strong></td>
                        <td>String</td>
                        <td>A</td>
                        <td>MCP Ïù¥Î¶Ñ</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td><strong>HID_ID</strong></td>
                        <td>int</td>
                        <td>5</td>
                        <td>HID Íµ¨Ïó≠ ID</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td><strong>velocity</strong></td>
                        <td>double</td>
                        <td>45.3</td>
                        <td>ÌòÑÏû¨ ÏÜçÎèÑ (m/min)</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td><strong>maxVelocity</strong></td>
                        <td>double</td>
                        <td>60.0</td>
                        <td>ÏµúÎåÄ ÏÜçÎèÑ (m/min)</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td><strong>absoluteVelocity</strong></td>
                        <td>double</td>
                        <td>0.755</td>
                        <td>ÏÉÅÎåÄ ÏÜçÎèÑ (velocity/maxVelocity)</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td><strong>vhlCnt</strong></td>
                        <td>int</td>
                        <td>3</td>
                        <td>ÌòÑÏû¨ OHT Ïàò</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td><strong>passCnt</strong></td>
                        <td>long</td>
                        <td>12</td>
                        <td>1Î∂ÑÍ∞Ñ ÌÜµÍ≥º OHT Ïàò</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td><strong>vhlStageWaitCnt</strong></td>
                        <td>int</td>
                        <td>0</td>
                        <td>ÎåÄÍ∏∞ OHT Ïàò</td>
                    </tr>
                    <tr>
                        <td>12</td>
                        <td><strong>is_initialized</strong></td>
                        <td>boolean</td>
                        <td>true</td>
                        <td>ÏÜçÎèÑ Î≥ÄÌôî Ïó¨Î∂Ä</td>
                    </tr>
                </tbody>
            </table>

            <h3>ÏÉòÌîå Îç∞Ïù¥ÌÑ∞</h3>
            <table class="table-orange">
                <thead>
                    <tr>
                        <th>createTime</th>
                        <th>railEdgeId</th>
                        <th>fabId</th>
                        <th>HID_ID</th>
                        <th>velocity</th>
                        <th>vhlCnt</th>
                        <th>passCnt</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1706512800000</td>
                        <td>M14A:RE:A:00001:00002</td>
                        <td>M14A</td>
                        <td>5</td>
                        <td>45.3</td>
                        <td>3</td>
                        <td>12</td>
                    </tr>
                    <tr>
                        <td>1706512800000</td>
                        <td>M14A:RE:A:00003:00004</td>
                        <td>M14A</td>
                        <td>5</td>
                        <td>52.1</td>
                        <td>2</td>
                        <td>8</td>
                    </tr>
                    <tr>
                        <td>1706512800000</td>
                        <td>M16A:RE:A:00010:00011</td>
                        <td>M16A</td>
                        <td>7</td>
                        <td>38.7</td>
                        <td>5</td>
                        <td>15</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 3. ATLAS_HID_INOUT (Ïã†Í∑ú) -->
        <div class="section">
            <h2><span class="num">3</span> ATLAS_HID_INOUT <span class="badge badge-new">NEW</span></h2>
            
            <div class="api-box">
                <code>LogpressoAPI.setInsertTuples("ATLAS_HID_INOUT", List.of(tuple), 20);</code>
            </div>

            <h3>Ïª¨Îüº Ï†ïÏùò</h3>
            <table>
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Ïª¨ÎüºÎ™Ö</th>
                        <th>ÌÉÄÏûÖ</th>
                        <th>NULL</th>
                        <th>ÏÑ§Î™Ö</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td><strong>createTime</strong></td>
                        <td>long</td>
                        <td>N</td>
                        <td>Ïù¥Î≤§Ìä∏ Î∞úÏÉù ÏãúÍ∞Ñ (milliseconds)</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><strong>fabId</strong></td>
                        <td>String(10)</td>
                        <td>N</td>
                        <td>FAB ID (M14A, M14B, M16A, M16B Îì±)</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><strong>mcpName</strong></td>
                        <td>String(10)</td>
                        <td>N</td>
                        <td>MCP Ïù¥Î¶Ñ</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td><strong>vhlId</strong></td>
                        <td>String(50)</td>
                        <td>N</td>
                        <td>OHT Ï∞®Îüâ ID (Ï†ÑÏ≤¥ ÌÇ§)</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td><strong>vhlName</strong></td>
                        <td>String(20)</td>
                        <td>N</td>
                        <td>OHT Ï∞®Îüâ Ïù¥Î¶Ñ</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td><strong>eventType</strong></td>
                        <td>String(3)</td>
                        <td>N</td>
                        <td>Ïù¥Î≤§Ìä∏ Ïú†Ìòï (<span class="badge badge-in">IN</span> / <span class="badge badge-out">OUT</span>)</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td><strong>fromHidId</strong></td>
                        <td>int</td>
                        <td>N</td>
                        <td>Ï∂úÎ∞ú HID Íµ¨Ïó≠ ID (-1: Íµ¨Ïó≠ Ïô∏Î∂Ä)</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td><strong>toHidId</strong></td>
                        <td>int</td>
                        <td>N</td>
                        <td>ÎèÑÏ∞© HID Íµ¨Ïó≠ ID (-1: Íµ¨Ïó≠ Ïô∏Î∂Ä)</td>
                    </tr>
                </tbody>
            </table>

            <h3>Ïù¥Î≤§Ìä∏ Ïú†Ìòï Ï†ïÏùò</h3>
            <table>
                <thead>
                    <tr>
                        <th>eventType</th>
                        <th>fromHidId</th>
                        <th>toHidId</th>
                        <th>ÏÑ§Î™Ö</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="badge badge-in">IN</span></td>
                        <td>-1 ÎòêÎäî Îã§Î•∏Í∞í</td>
                        <td>> 0</td>
                        <td>HID Íµ¨Ïó≠ ÏßÑÏûÖ</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-out">OUT</span></td>
                        <td>> 0</td>
                        <td>-1 ÎòêÎäî Îã§Î•∏Í∞í</td>
                        <td>HID Íµ¨Ïó≠ Ïù¥ÌÉà</td>
                    </tr>
                </tbody>
            </table>

            <h3>ÏÉòÌîå Îç∞Ïù¥ÌÑ∞</h3>
            <table>
                <thead>
                    <tr>
                        <th>createTime</th>
                        <th>fabId</th>
                        <th>mcpName</th>
                        <th>vhlName</th>
                        <th>eventType</th>
                        <th>fromHidId</th>
                        <th>toHidId</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1706512345678</td>
                        <td>M14A</td>
                        <td>A</td>
                        <td>OHT001</td>
                        <td><span class="badge badge-in">IN</span></td>
                        <td>-1</td>
                        <td>5</td>
                    </tr>
                    <tr>
                        <td>1706512350123</td>
                        <td>M14A</td>
                        <td>A</td>
                        <td>OHT001</td>
                        <td><span class="badge badge-out">OUT</span></td>
                        <td>5</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>1706512355456</td>
                        <td>M16A</td>
                        <td>A</td>
                        <td>OHT025</td>
                        <td><span class="badge badge-in">IN</span></td>
                        <td>3</td>
                        <td>4</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 4. JAVA ÏàòÏ†ï ÏΩîÎìú -->
        <div class="section">
            <h2><span class="num">4</span> JAVA ÏàòÏ†ï ÏΩîÎìú</h2>
            <p style="margin-bottom: 15px; color: #888;">
                üìÅ ÌååÏùº: <strong style="color: #fff;">OhtMsgWorkerRunnable.java</strong><br>
                üìç ÏúÑÏπò: <strong style="color: #fff;">_setRailEdgeVelocity()</strong> Î©îÏÑúÎìú Ï¥àÎ∞òÏóê Ï∂îÍ∞Ä
            </p>
            <div class="code-block">
<pre><span class="comment">// _setRailEdgeVelocity() Î©îÏÑúÎìú Ï¥àÎ∞òÏóê Ï∂îÍ∞Ä</span>
<span class="keyword">if</span> (lastRailEdge != <span class="keyword">null</span> && railEdge != <span class="keyword">null</span>) {
    <span class="keyword">int</span> lastHid = lastRailEdge.<span class="method">getHIDId</span>();
    <span class="keyword">int</span> currHid = railEdge.<span class="method">getHIDId</span>();
    
    <span class="keyword">if</span> (lastHid != currHid) {
        <span class="class">Tuple</span> tuple = <span class="keyword">new</span> <span class="class">Tuple</span>();
        tuple.<span class="method">put</span>(<span class="string">"createTime"</span>, <span class="class">System</span>.<span class="method">currentTimeMillis</span>());
        tuple.<span class="method">put</span>(<span class="string">"fabId"</span>, <span class="keyword">this</span>.fabId);
        tuple.<span class="method">put</span>(<span class="string">"mcpName"</span>, <span class="keyword">this</span>.mcpName);
        tuple.<span class="method">put</span>(<span class="string">"vhlId"</span>, vehicle.<span class="method">getId</span>());
        tuple.<span class="method">put</span>(<span class="string">"vhlName"</span>, vehicle.<span class="method">getName</span>());
        tuple.<span class="method">put</span>(<span class="string">"eventType"</span>, currHid > <span class="highlight">0</span> ? <span class="string">"IN"</span> : <span class="string">"OUT"</span>);
        tuple.<span class="method">put</span>(<span class="string">"fromHidId"</span>, lastHid);
        tuple.<span class="method">put</span>(<span class="string">"toHidId"</span>, currHid);
        
        <span class="class">LogpressoAPI</span>.<span class="method">setInsertTuples</span>(
            <span class="string">"ATLAS_HID_INOUT"</span>, 
            <span class="class">List</span>.<span class="method">of</span>(tuple), 
            <span class="highlight">20</span>
        );
    }
}</pre>
            </div>
        </div>

        <!-- 5. Logpresso Ï°∞Ìöå ÏøºÎ¶¨ -->
        <div class="section">
            <h2><span class="num">5</span> Logpresso Ï°∞Ìöå ÏøºÎ¶¨ ÏòàÏãú</h2>
            
            <h3>ATLAS_RAIL_TRAFFIC Ï°∞Ìöå</h3>
            <div class="query-block">
                <div class="query-title">üìå HID Íµ¨Ïó≠Î≥Ñ OHT ÌòÑÌô© (1Î∂Ñ Îã®ÏúÑ)</div>
                <code>table ATLAS_RAIL_TRAFFIC duration=1h
| where HID_ID > 0
| stats sum(vhlCnt) as total_vhl, sum(passCnt) as total_pass by HID_ID, fabId
| sort HID_ID</code>
            </div>

            <div class="query-block">
                <div class="query-title">üìå RailEdgeÎ≥Ñ ÏÜçÎèÑ ÌòÑÌô©</div>
                <code>table ATLAS_RAIL_TRAFFIC duration=1h
| where fabId == "M14A"
| stats avg(velocity) as avg_velocity by railEdgeId
| sort avg_velocity</code>
            </div>

            <h3>ATLAS_HID_INOUT Ï°∞Ìöå</h3>
            <div class="query-block">
                <div class="query-title">üìå ÏµúÍ∑º 1ÏãúÍ∞Ñ HID IN/OUT Ïù¥Î≤§Ìä∏ Ï°∞Ìöå</div>
                <code>table ATLAS_HID_INOUT duration=1h
| sort createTime desc</code>
            </div>

            <div class="query-block">
                <div class="query-title">üìå HID Íµ¨Ïó≠Î≥Ñ ÏßÑÏûÖ ÌöüÏàò ÏßëÍ≥Ñ</div>
                <code>table ATLAS_HID_INOUT duration=1d
| where eventType == "IN"
| stats count as in_count by toHidId, fabId
| sort in_count desc</code>
            </div>

            <div class="query-block">
                <div class="query-title">üìå ÌäπÏ†ï OHT Ïù¥Îèô Í≤ΩÎ°ú Ï∂îÏ†Å</div>
                <code>table ATLAS_HID_INOUT duration=1d
| where vhlName == "OHT001"
| sort createTime</code>
            </div>
        </div>

        <div class="footer">
            <p>üìÖ Î¨∏ÏÑú ÏûëÏÑ±Ïùº: 2026-01-28</p>
            <p style="margin-top: 5px;">SK Hynix AMHS Team</p>
        </div>
    </div>
</body>
</html>