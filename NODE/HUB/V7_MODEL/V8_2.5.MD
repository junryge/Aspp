# V8 변화량 예측 모델 - 전체 컬럼 구성 (완전 통합표)

## 🎯 TARGET: `CURRENT_M16A_3F_JOB_2` (M16A 3층 JOB 수 → 10분 후 MIN/MAX/AVG 변화량 예측)

---

## 📊 HB.CSV 전체 컬럼 분석 (총 59개 컬럼)

| 상태 | 그룹 | 컬럼명 | 의미 | 중요도 | 연관성 | 왜 필요한가? | Feature 개수 | 비고 |
|------|------|--------|------|--------|--------|--------------|--------------|------|
| **✅ 사용** | **TARGET** | CURRENT_M16A_3F_JOB_2 | M16A 3F JOB 수 (버전2) | ⭐⭐⭐⭐⭐ | 🎯 TARGET | 예측 대상 | - | **타겟** |
| ✅ 사용 | V7-1. storage | M16A_3F_STORAGE_UTIL | M16A 3F 저장소 사용률 | ⭐⭐⭐⭐⭐ | 🔴 직접 | TARGET과 동일 위치. 저장소 포화 = 급증 직접 원인. 임계: ≥205 | 9개 | Top 5 중요도 |
| ✅ 사용 | V7-2. fs_storage | CD_M163FSTORAGEUSE | M16A 3F 저장소 사용량 | ⭐⭐⭐⭐⭐ | 🔴 직접 | 상세 사용량 파악 | 7개 | - |
| ✅ 사용 | V7-2. fs_storage | CD_M163FSTORAGETOTAL | M16A 3F 저장소 전체 용량 | ⭐⭐⭐⭐⭐ | 🔴 직접 | 남은 용량 계산 (TOTAL-USE) | 7개 | - |
| ✅ 사용 | V7-2. fs_storage | CD_M163FSTORAGEUTIL | M16A 3F 저장소 사용률 | ⭐⭐⭐⭐⭐ | 🔴 직접 | USE/TOTAL = UTIL. 임계: ≥7(경고), ≥10(위험) | 12개 | 추가 5개 Feature |
| ✅ 사용 | V7-3. hub | HUBROOMTOTAL | HUB 전체 남은 공간 | ⭐⭐⭐⭐⭐ | 🔴 직접 | HUB 여유 ↓ → M16A 3F 몰림. 임계: <590(Critical), <610(High) | 12개 | **Top 3 중요도** |
| ✅ 사용 | V7-4. cmd | M16A_3F_CMD | M16A 3F 명령 수 | ⭐⭐⭐⭐ | 🟠 간접 | 처리 능력. CMD ↓ → 처리 느림 | 7개 | - |
| ✅ 사용 | V7-4. cmd | M16A_6F_TO_HUB_CMD | M16A 6F → HUB 명령 | ⭐⭐⭐⭐ | 🟠 간접 | 유입 경로 처리 능력. 임계: <220(Low) | 9개 | - |
| ✅ 사용 | V7-5. inflow | M16A_6F_TO_HUB_JOB | 6F → HUB 유입 JOB | ⭐⭐⭐⭐⭐ | 🔴 직접 | 유입 ↑ → HUB 포화 → 급증 | 3개 | - |
| ✅ 사용 | V7-5. inflow | M16A_2F_TO_HUB_JOB2 | 2F → HUB 유입 JOB | ⭐⭐⭐⭐⭐ | 🔴 직접 | 유입 경로 #2 | 3개 | - |
| ✅ 사용 | V7-5. inflow | M14A_3F_TO_HUB_JOB2 | M14A → HUB 유입 JOB | ⭐⭐⭐⭐⭐ | 🔴 직접 | 외부 FAB 유입. 유입-유출 균형 | 4개 | net_flow 복합 |
| ✅ 사용 | V7-6. outflow | M16A_3F_TO_M16A_6F_JOB | 3F → 6F 유출 JOB | ⭐⭐⭐⭐ | 🔴 직접 | 유출 ↓ → M16A 3F 쌓임 | 3개 | - |
| ✅ 사용 | V7-6. outflow | M16A_3F_TO_M16A_2F_JOB | 3F → 2F 유출 JOB | ⭐⭐⭐⭐ | 🔴 직접 | 유출 경로 #2 | 3개 | - |
| ✅ 사용 | V7-6. outflow | M16A_3F_TO_M14A_3F_JOB | 3F → M14A 유출 JOB | ⭐⭐⭐⭐ | 🔴 직접 | 외부 FAB 유출 | 3개 | - |
| ✅ 사용 | V7-7. maxcapa | M16A_6F_LFT_MAXCAPA | 6F LFT 최대 용량 | ⭐⭐⭐ | 🟡 제한 | 시스템 한계. 정적 정보 | 1개 | last_value만 |
| ✅ 사용 | V7-7. maxcapa | M16A_2F_LFT_MAXCAPA | 2F LFT 최대 용량 | ⭐⭐⭐ | 🟡 제한 | 시스템 한계. 정적 정보 | 1개 | last_value만 |
| ✅ 사용 | V7-8. que | M16HUB.QUE.ALL.CURRENTQCNT | 현재 반송 QUEUE 수 | ⭐⭐⭐⭐⭐ | 🔴 직접 | QUEUE ↑ = 병목. 임계: ≥1200 | 9개 | V7 추가 |
| ✅ 사용 | V7-8. que | M16HUB.QUE.TIME.AVGTOTALTIME1MIN | 최근 1분 평균 반송시간 | ⭐⭐⭐⭐⭐ | 🔴 직접 | 반송시간 ↑ = 느림. 임계: ≥4.0 | 10개 | V7 추가 |
| ✅ 사용 | V8-9. m16hub_que | M16HUB.QUE.ALL.CURRENTQCOMPLETED | 10분간 반송완료 수 | ⭐⭐⭐⭐⭐ | 🔴 직접 | **처리량 지표**. 완료 ↓ = 처리 느림 | 8개 | **V8 핵심** |
| ✅ 사용 | V8-9. m16hub_que | M16HUB.QUE.ALL.FABTRANSJOBCNT | FAB간 반송 JOB 수 | ⭐⭐⭐⭐⭐ | 🔴 직접 | **유입량 지표**. FAB간 물량 이동 | 8개 | **V8 핵심** |
| ✅ 사용 | V8-9. m16hub_que | M16HUB.QUE.TIME.AVGTOTALTIME | 평균 반송시간 (전체) | ⭐⭐⭐⭐⭐ | 🔴 직접 | **병목 지표**. 장기 평균 (안정적) | 7개 | **V8 핵심** |
| ✅ 사용 | V8-9. m16hub_que | M16HUB.QUE.OHT.CURRENTOHTQCNT | 현재 OHT 반송 Q | ⭐⭐⭐⭐ | 🔴 직접 | **OHT 부하**. OHT Q ↑ = 운송 병목 | 7개 | - |
| ✅ 사용 | V8-9. m16hub_que | M16HUB.QUE.OHT.OHTUTIL | OHT 사용율 | ⭐⭐⭐⭐⭐ | 🔴 직접 | **포화 지표**. 임계: ≥0.8(High), ≥0.9(Critical) | 9개 | **V8 핵심** |
| ✅ 사용 | V8-10. m16a_que | M16A.QUE.ALL.CURRENTQCOMPLETED | M16A 반송완료 수 (10분) | ⭐⭐⭐⭐⭐ | 🔴 직접 | M16A 전체 처리량 | 7개 | **V8 핵심** Top 5 |
| ✅ 사용 | V8-10. m16a_que | M16A.QUE.ALL.CURRENTQCREATED | M16A 반송생성 수 (10분) | ⭐⭐⭐⭐⭐ | 🔴 직접 | 생성 ↑ + 완료 ↓ = JOB 누적 | 7개 | **V8 핵심** |
| ✅ 사용 | V8-10. m16a_que | M16A.QUE.OHT.CURRENTOHTQCNT | M16A OHT 반송 Q | ⭐⭐⭐⭐ | 🔴 직접 | M16A 내부 운송 병목 | 7개 | - |
| ✅ 사용 | V8-10. m16a_que | M16A.QUE.OHT.OHTUTIL | M16A OHT 사용율 | ⭐⭐⭐⭐⭐ | 🔴 직접 | M16A 운송 능력 한계 | 7개 | - |
| ✅ 사용 | V8-10. m16a_que | M16A.QUE.LOAD.AVGLOADTIME1MIN | 실시간 Load 시간 (1분) | ⭐⭐⭐⭐⭐ | 🔴 직접 | **실시간 지표**. Load ↑ = 생산 병목 | 7개 | **V8 핵심** Top 5 |
| ✅ 사용 | V8-10. m16a_que | M16A.QUE.ALL.TRANSPORT4MINOVERCNT | 4분 이상 반송 건수 | ⭐⭐⭐⭐⭐ | 🔴 직접 | **선행 지표**. 급증 예측 핵심 | 8개 | **V8 핵심** Top 3 |
| ✅ 사용 | V8-10. m16a_que | M16A.QUE.ABN.QUETIMEDELAY | 20분 이상 지연 FOUP | ⭐⭐⭐⭐⭐ | 🔴 직접 | **비상 신호**. 1건이라도 → 위험 | 9개 | **V8 핵심** Top 5 |
| ✅ 사용 | V8-11. velocity | M16A_BR_AVG_VELOCITY | M16A Branch 평균 속도 | ⭐⭐⭐⭐ | 🟠 간접 | 시스템 건강도. 새로운 차원(물리 속도) | 9개 | - |
| ✅ 사용 | V8-11. velocity | M14A_A_AVG_VELOCITY | M14A 평균 속도 | ⭐⭐⭐⭐ | 🟠 간접 | 유입 경로 속도 | 7개 | - |
| | | | | | | | | |
| **🔥 추가추천** | **추가-1** | **CURRENT_M16A_3F_JOB** | **M16A 3F JOB 수 (버전1)** | **⭐⭐⭐⭐⭐** | **🔴 직접** | **TARGET 보완**. _2와 비교 가능. 매우 중요! | **7개** | **강력 추천!!** |
| 🟡 추가검토 | 추가-2 | M14B_7F_TO_HUB_JOB2 | M14B 7F → HUB 유입 | ⭐⭐⭐⭐ | 🟠 간접 | 추가 유입 경로 (M14B) | 3개 | inflow 보완 |
| 🟡 추가검토 | 추가-3 | M16A_3F_TO_M14B_7F_JOB | 3F → M14B 7F 유출 | ⭐⭐⭐⭐ | 🟠 간접 | 추가 유출 경로 (M14B) | 3개 | outflow 보완 |
| 🟡 선택 | 선택-1 | M16A_2F_TO_6F_JOB | 2F → 6F 내부 이동 | ⭐⭐⭐ | 🟠 간접 | M16A 내부 흐름 파악 | 3개 | 내부 흐름 |
| 🟡 선택 | 선택-2 | M16A_6F_TO_2F_JOB | 6F → 2F 내부 이동 | ⭐⭐⭐ | 🟠 간접 | M16A 내부 흐름 파악 | 3개 | 내부 흐름 |
| 🟡 선택 | 선택-3 | M16A_3F_TO_3F_MLUD_JOB | 3F 내부 MLUD | ⭐⭐⭐ | 🟠 간접 | 3F 내부 처리량 | 3개 | 내부 처리 |
| 🟡 선택 | 선택-4 | M16B_10F_TO_HUB_JOB | M16B 10F → HUB | ⭐⭐⭐ | 🟠 간접 | M16B 유입 (M16A와 다름) | 3개 | M16B |
| 🟡 선택 | 선택-5 | M14_TO_M16_OFS_CUR | M14 → M16 Offset Current | ⭐⭐⭐ | 🟠 간접 | FAB간 상태 지표 | 7개 | FAB간 |
| 🟡 선택 | 선택-6 | M16_TO_M14_OFS_CUR | M16 → M14 Offset Current | ⭐⭐⭐ | 🟠 간접 | FAB간 상태 지표 | 7개 | FAB간 |
| 🟡 선택 | 선택-7 | M14A_3F_TO_HUB_CMD | M14A CMD | ⭐⭐⭐ | 🟠 간접 | M14A 처리 능력 보완 | 7개 | CMD 보완 |
| 🟡 선택 | 선택-8 | M16A_2F_TO_HUB_CMD | 2F CMD | ⭐⭐⭐ | 🟠 간접 | 2F 처리 능력 (6F 이미 있음) | 7개 | CMD 보완 |
| | | | | | | | | |
| ❌ 제외 | 제외 | M14A_3F_TO_HUB_JOB_ALT | M14A 대체 경로 유입 | ⭐⭐ | 🟡 제한 | 대체 경로 (우선순위 낮음) | - | ALT |
| ❌ 제외 | 제외 | M14B_7F_TO_HUB_JOB_ALT | M14B 대체 경로 유입 | ⭐⭐ | 🟡 제한 | 대체 경로 | - | ALT |
| ❌ 제외 | 제외 | M16A_2F_TO_HUB_JOB_ALT | 2F 대체 경로 유입 | ⭐⭐ | 🟡 제한 | 대체 경로 | - | ALT |
| ❌ 제외 | 제외 | M16A_6F_TO_HUB_JOB_ALT | 6F 대체 경로 유입 | ⭐⭐ | 🟡 제한 | 대체 경로 | - | ALT |
| ❌ 제외 | 제외 | M14B_7F_TO_HUB_CMD | M14B CMD | ⭐⭐ | 🟡 제한 | 중요도 낮음 | - | 낮음 |
| ❌ 제외 | 제외 | M16A_3F_CNV_MAXCAPA | 3F CNV 최대 용량 | ⭐⭐ | 🟡 제한 | 정적 정보 | - | 정적 |
| ❌ 제외 | 제외 | M16A_3F_LFT_MAXCAPA | 3F LFT 최대 용량 | ⭐⭐ | 🟡 제한 | 정적 정보 | - | 정적 |
| ❌ 제외 | 제외 | M16A_3F_M14BLFT_MAXCAPA | 3F M14B LFT 최대 용량 | ⭐ | 🟡 제한 | 정적 정보 | - | 정적 |
| ❌ 제외 | 제외 | M14A_3F_CNV_MAXCAPA | M14A CNV 최대 용량 | ⭐ | 🟡 제한 | 정적 정보 | - | 정적 |
| ❌ 제외 | 제외 | M14B_7F_LFT_MAXCAPA | M14B LFT 최대 용량 | ⭐ | 🟡 제한 | 정적 정보 | - | 정적 |
| ❌ 제외 | 제외 | M16A_3F_TO_M14A_CNV_AI_CMD | 3F → M14A AI 명령 | ⭐ | 🟡 제한 | AI 자동 명령 (우선순위 낮음) | - | AI CMD |
| ❌ 제외 | 제외 | M16A_3F_TO_M14B_LFT_AI_CMD | 3F → M14B AI 명령 | ⭐ | 🟡 제한 | AI 자동 명령 | - | AI CMD |
| ❌ 제외 | 제외 | M16A_3F_TO_M16A_LFT_AI_CMD | 3F → M16A LFT AI 명령 | ⭐ | 🟡 제한 | AI 자동 명령 | - | AI CMD |
| ❌ 제외 | 제외 | M16A_3F_TO_M16A_MLUD_AI_CMD | 3F → MLUD AI 명령 | ⭐ | 🟡 제한 | AI 자동 명령 | - | AI CMD |
| ❌ 제외 | 제외 | M16A_3F_TO_M16A_3F_STB_CMD | 3F STB 명령 | ⭐ | 🟡 제한 | 내부 명령 | - | STB CMD |

---

## 📊 버전별 구성 요약

| 버전 | 설명 | 컬럼 수 | Feature 수 | MAE 개선 | 방향정확도 | 추천도 |
|------|------|---------|-----------|----------|-----------|--------|
| **V7 기존** | 기본 모델 | 19개 | ~119개 | 기준 (12~16) | 기준 (72~78%) | ⭐⭐⭐ |
| **V8 Core** | V7 + 신규 14개 | 33개 | ~234개 | -1~3 | +3~5% | ⭐⭐⭐⭐ |
| **V8 Enhanced** | V8 + CURRENT_M16A_3F_JOB | **34개** | **~241개** | **-2~4** | **+4~6%** | **⭐⭐⭐⭐⭐** |
| **V8 Full** | V8 Enhanced + M14B 2개 | 36개 | ~247개 | -3~5 | +5~7% | ⭐⭐⭐⭐ |
| **V8 Max** | V8 Full + 선택 8개 | 44개 | ~303개 | -4~6 | +6~8% | ⭐⭐⭐ |

---

## 🔥 중요도 순위 Top 10

| 순위 | 컬럼명 | 그룹 | 중요도 | 이유 |
|------|--------|------|--------|------|
| 🥇 1 | HUBROOMTOTAL | hub | ⭐⭐⭐⭐⭐ | HUB 여유 공간 → 급증 핵심 원인 |
| 🥈 2 | M16A_3F_STORAGE_UTIL | storage | ⭐⭐⭐⭐⭐ | TARGET 동일 위치 저장소 |
| 🥉 3 | M16A.QUE.ALL.TRANSPORT4MINOVERCNT | m16a_que | ⭐⭐⭐⭐⭐ | **선행 지표**, 급증 임박 신호 |
| 4 | M16A.QUE.LOAD.AVGLOADTIME1MIN | m16a_que | ⭐⭐⭐⭐⭐ | 가장 실시간 병목 지표 |
| 5 | **CURRENT_M16A_3F_JOB** | **추가-1** | **⭐⭐⭐⭐⭐** | **TARGET 보완** |
| 6 | M16HUB.QUE.ALL.CURRENTQCOMPLETED | m16hub_que | ⭐⭐⭐⭐⭐ | 처리량 = 시스템 건강도 |
| 7 | M16A.QUE.ABN.QUETIMEDELAY | m16a_que | ⭐⭐⭐⭐⭐ | 비상 신호 |
| 8 | M16HUB.QUE.OHT.OHTUTIL | m16hub_que | ⭐⭐⭐⭐⭐ | OHT 포화 = 운송 병목 |
| 9 | M16HUB.QUE.ALL.CURRENTQCNT | que | ⭐⭐⭐⭐⭐ | V7 핵심, 대기 Q |
| 10 | M16A.QUE.ALL.CURRENTQCREATED | m16a_que | ⭐⭐⭐⭐⭐ | 유입 압력 |

---

## 💡 최종 권장 구성

### 🔥 **V8 Enhanced (강력 추천)** - 34개 컬럼

```python
FEATURE_COLS = {
    # V7 기존 (19개)
    'storage': ['M16A_3F_STORAGE_UTIL'],
    'fs_storage': ['CD_M163FSTORAGEUSE', 'CD_M163FSTORAGETOTAL', 'CD_M163FSTORAGEUTIL'],
    'hub': ['HUBROOMTOTAL'],
    'cmd': ['M16A_3F_CMD', 'M16A_6F_TO_HUB_CMD'],
    'inflow': ['M16A_6F_TO_HUB_JOB', 'M16A_2F_TO_HUB_JOB2', 'M14A_3F_TO_HUB_JOB2'],
    'outflow': ['M16A_3F_TO_M16A_6F_JOB', 'M16A_3F_TO_M16A_2F_JOB', 'M16A_3F_TO_M14A_3F_JOB'],
    'maxcapa': ['M16A_6F_LFT_MAXCAPA', 'M16A_2F_LFT_MAXCAPA'],
    'que': ['M16HUB.QUE.ALL.CURRENTQCNT', 'M16HUB.QUE.TIME.AVGTOTALTIME1MIN'],
    
    # V8 신규 (14개)
    'm16hub_que': [
        'M16HUB.QUE.ALL.CURRENTQCOMPLETED',
        'M16HUB.QUE.ALL.FABTRANSJOBCNT',
        'M16HUB.QUE.TIME.AVGTOTALTIME',
        'M16HUB.QUE.OHT.CURRENTOHTQCNT',
        'M16HUB.QUE.OHT.OHTUTIL'
    ],
    'm16a_que': [
        'M16A.QUE.ALL.CURRENTQCOMPLETED',
        'M16A.QUE.ALL.CURRENTQCREATED',
        'M16A.QUE.OHT.CURRENTOHTQCNT',
        'M16A.QUE.OHT.OHTUTIL',
        'M16A.QUE.LOAD.AVGLOADTIME1MIN',
        'M16A.QUE.ALL.TRANSPORT4MINOVERCNT',
        'M16A.QUE.ABN.QUETIMEDELAY'
    ],
    'velocity': [
        'M16A_BR_AVG_VELOCITY',
        'M14A_A_AVG_VELOCITY'
    ],
    
    # 🔥 강력 추가 추천 (1개)
    'target_alternative': ['CURRENT_M16A_3F_JOB']  # TARGET 보완
}
```

**총 34개 컬럼 → 약 241개 Feature**

---

## ⚠️ 핵심 체크사항

### ✅ 반드시 확인:
1. **CURRENT_M16A_3F_JOB 존재 여부**
   - HB.CSV에 있는지 확인
   - CURRENT_M16A_3F_JOB_2와 값이 다른지 확인
   - **다르면 반드시 추가!**

2. **Branch CNT/VELOCITY**
   - 37개 중 주요 경로 5~10개 선택 가능
   - 별도 분석 필요

---

## 🎯 다음 단계

1. **HB.CSV 컬럼 확인** - 34개 존재 체크
2. **V8 Enhanced 학습코드 작성** - 34개 컬럼 기반
3. **학습 & 평가**
4. **V7 vs V8 Enhanced 성능 비교**
5. **필요 시 V8 Full로 확장**

---