<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HUBROOM 반송량 예측 시스템 완전 이해</title>
    <style>
        @page {
            margin: 2cm;
            size: A4;
        }
        
        body {
            font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            border-bottom: 3px solid #2c3e50;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 28px;
            margin: 0;
            font-weight: bold;
        }
        
        .header .subtitle {
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 10px;
        }
        
        .section {
            margin-bottom: 40px;
            page-break-inside: avoid;
        }
        
        .section h2 {
            color: #2c3e50;
            font-size: 20px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-bottom: 20px;
        }
        
        .section h3 {
            color: #34495e;
            font-size: 16px;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-left: 5px solid #e74c3c;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .info-box {
            background: linear-gradient(135deg, #e8f4fd 0%, #d4edda 100%);
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .process-flow {
            background: #f8f9fa;
            border: 2px dashed #6c757d;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border-radius: 8px;
        }
        
        .flow-step {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 8px 15px;
            margin: 5px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .arrow {
            font-size: 20px;
            color: #3498db;
            margin: 0 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        th, td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .emoji {
            font-size: 1.2em;
        }
        
        .conclusion {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            margin: 30px 0;
        }
        
        .conclusion h2 {
            color: white;
            border: none;
            padding: 0;
            margin-bottom: 15px;
        }
        
        .page-break {
            page-break-before: always;
        }
        
        .toc {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .toc h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        
        .toc li {
            padding: 5px 0;
            border-bottom: 1px dotted #ccc;
        }
        
        .toc li:last-child {
            border-bottom: none;
        }

        .hubroom-diagram {
            background: #f1f3f4;
            border: 2px solid #3498db;
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }

        .fab-box {
            display: inline-block;
            background: #34495e;
            color: white;
            padding: 15px 20px;
            margin: 10px;
            border-radius: 8px;
            font-weight: bold;
        }

        .hub-box {
            display: block;
            background: #e74c3c;
            color: white;
            padding: 20px;
            margin: 20px auto;
            border-radius: 10px;
            font-weight: bold;
            width: 200px;
        }
    </style>
</head>
<body>
    <!-- 헤더 -->
    <div class="header">
        <h1><span class="emoji">🏠</span> HUBROOM 반송량 예측 시스템</h1>
        <h1>완전 이해 가이드</h1>
        <div class="subtitle">
            AI 기반 허브룸 물류 예측 및 알람 시스템<br>
            작성일: 2025년 8월 28일
        </div>
    </div>

    <!-- 핵심 개념 -->
    <div class="highlight-box">
        <h3><span class="emoji">💡</span> 핵심 개념</h3>
        <strong>"20분간의 허브룸 관련 데이터를 보고 → 10분 후 허브룸 반송량을 예측"</strong>
        <br><br>
        허브룸이 과부하 상태가 될 것을 미리 예측해서 알람을 발생시키는 시스템입니다.
    </div>

    <!-- 목차 -->
    <div class="toc">
        <h3><span class="emoji">📋</span> 목차</h3>
        <ul>
            <li>1. HUBROOM이란?</li>
            <li>2. 예측 대상: 허브룸 반송량</li>
            <li>3. 왜 허브룸만 예측하는가?</li>
            <li>4. AI 예측 시스템 작동 원리</li>
            <li>5. 데이터 수집: 38개 지표</li>
            <li>6. 예측 프로세스</li>
            <li>7. 실제 시나리오</li>
            <li>8. 알람 시스템</li>
        </ul>
    </div>

    <!-- 1. HUBROOM이란 -->
    <div class="section">
        <h2><span class="emoji">🏠</span> 1. HUBROOM이란?</h2>
        
        <div class="hubroom-diagram">
            <div class="fab-box">M16 FAB<br>6층/2층</div>
            <span class="arrow">→</span>
            <div class="hub-box">HUBROOM<br>(중앙 허브)</div>
            <span class="arrow">→</span>
            <div class="fab-box">M14A/M14B FAB<br>3층/7층</div>
            <br><br>
            <div style="font-size: 14px; color: #666;">
                웨이퍼 생산 → <strong>허브룸에서 집중 관리</strong> → 후속 공정
            </div>
        </div>

        <h3>HUBROOM의 역할</h3>
        <ul>
            <li><strong>물류 허브</strong>: 모든 FAB의 FOUP(웨이퍼 운송용기)가 모이는 중앙 집중지</li>
            <li><strong>임시 저장소</strong>: Storage에서 FOUP를 일시 보관</li>
            <li><strong>교통 관제소</strong>: 각 FAB로의 반송량 조절</li>
            <li><strong>병목 지점</strong>: 여기서 막히면 전체 FAB 생산 중단!</li>
        </ul>
    </div>

    <!-- 2. 예측 대상 -->
    <div class="section">
        <h2><span class="emoji">🎯</span> 2. 예측 대상: 허브룸 반송량</h2>

        <div class="info-box">
            <h3>정확한 예측 대상</h3>
            <div class="code-block">
타겟 변수: CURRENT_M16A_3F_JOB_2
= HUBROOM 내 총 반송 작업 수 (Bridge 장비 포트 포함)
            </div>
        </div>

        <h3>반송량이 중요한 이유</h3>
        <table>
            <tr>
                <th>반송량 상태</th>
                <th>의미</th>
                <th>위험도</th>
            </tr>
            <tr>
                <td>정상 (100-200개)</td>
                <td>원활한 물류 흐름</td>
                <td><span style="color: green;">✅ 안전</span></td>
            </tr>
            <tr>
                <td>증가 (200-250개)</td>
                <td>부하 증가, 주의 필요</td>
                <td><span style="color: orange;">⚠️ 주의</span></td>
            </tr>
            <tr>
                <td>과부하 (250개+)</td>
                <td>허브룸 정체, 전체 라인 위험</td>
                <td><span style="color: red;">🚨 위험</span></td>
            </tr>
        </table>
    </div>

    <!-- 3. 왜 허브룸만? -->
    <div class="section">
        <h2><span class="emoji">🤔</span> 3. 왜 허브룸만 예측하는가?</h2>

        <h3><span class="emoji">🔍</span> 핵심 이유</h3>
        <div class="warning-box">
            <ul>
                <li><strong>병목점</strong>: 모든 FAB의 물류가 허브룸을 거쳐감</li>
                <li><strong>가장 복잡</strong>: 여러 FAB의 영향을 동시에 받음</li>
                <li><strong>예측 효과 최대</strong>: 허브룸만 관리하면 전체 최적화</li>
                <li><strong>알람 우선순위</strong>: 가장 치명적인 구간</li>
            </ul>
        </div>

        <h3>허브룸 = 교통의 요충지</h3>
        <div class="process-flow">
            <div style="font-size: 16px; font-weight: bold; margin-bottom: 15px;">
                🚗 도심 교차로처럼 모든 교통이 집중되는 지점
            </div>
            <div class="flow-step">M16에서 생산</div>
            <span class="arrow">→</span>
            <div class="flow-step" style="background: #e74c3c;">허브룸 집중</div>
            <span class="arrow">→</span>
            <div class="flow-step">M14로 분산</div>
            <br><br>
            <div style="color: #e74c3c; font-weight: bold;">
                허브룸이 막히면 → 전체 FAB 마비!
            </div>
        </div>
    </div>

    <!-- 4. 작동 원리 -->
    <div class="section page-break">
        <h2><span class="emoji">🤖</span> 4. AI 예측 시스템 작동 원리</h2>

        <h3>예측 메커니즘</h3>
        <div class="process-flow" style="background: #e8f5e8;">
            <div class="flow-step" style="background: #27ae60;">현재 10:00</div>
            <span class="arrow">→</span>
            <div class="flow-step" style="background: #2980b9;">20분 데이터<br>(09:40~10:00)</div>
            <span class="arrow">→</span>
            <div class="flow-step" style="background: #8e44ad;">AI 분석</div>
            <span class="arrow">→</span>
            <div class="flow-step" style="background: #e74c3c;">10:10 예측<br>(10분 후)</div>
        </div>

        <h3>예측 정확도를 높이는 요소</h3>
        <ul>
            <li><strong>시계열 패턴</strong>: 과거 20분의 변화 추세 분석</li>
            <li><strong>다변량 분석</strong>: 38개 지표 동시 고려</li>
            <li><strong>상관관계</strong>: 각 FAB 상황이 허브룸에 미치는 영향 학습</li>
            <li><strong>실시간 보정</strong>: 매분마다 새로운 데이터로 업데이트</li>
        </ul>
    </div>

    <!-- 5. 데이터 수집 -->
    <div class="section">
        <h2><span class="emoji">📊</span> 5. 데이터 수집: 38개 지표</h2>

        <h3>주요 데이터 그룹</h3>
        <table>
            <tr>
                <th>분류</th>
                <th>주요 지표</th>
                <th>허브룸 영향</th>
            </tr>
            <tr>
                <td><strong>허브 유입</strong></td>
                <td>M16A_6F_TO_HUB_JOB<br>M14A_3F_TO_HUB_JOB</td>
                <td>허브룸으로 들어오는 물량</td>
            </tr>
            <tr>
                <td><strong>허브 유출</strong></td>
                <td>M16A_3F_TO_M14A_3F_JOB<br>M16A_3F_TO_M14B_7F_JOB</td>
                <td>허브룸에서 나가는 물량</td>
            </tr>
            <tr>
                <td><strong>저장 상태</strong></td>
                <td>M16A_3F_STORAGE_UTIL</td>
                <td>허브룸 저장공간 사용률</td>
            </tr>
            <tr>
                <td><strong>처리 능력</strong></td>
                <td>M16A_3F_CNV_MAXCAPA<br>M14A_3F_CNV_MAXCAPA</td>
                <td>각 설비의 처리 한계</td>
            </tr>
            <tr>
                <td><strong>대기 명령</strong></td>
                <td>M16A_6F_TO_HUB_CMD</td>
                <td>실행 대기 중인 명령 수</td>
            </tr>
        </table>

        <div class="info-box">
            <h3>데이터 수집 주기</h3>
            <div class="code-block">
매분마다 수집: 38개 지표 × 20분 = 760개 데이터 포인트
실시간 업데이트: 새로운 1분 데이터 추가, 가장 오래된 1분 삭제
연속성 보장: 결측치 없는 연속된 20분 데이터만 사용
            </div>
        </div>
    </div>

    <!-- 6. 예측 프로세스 -->
    <div class="section">
        <h2><span class="emoji">🔮</span> 6. 예측 프로세스</h2>

        <h3>Step 1: 데이터 전처리</h3>
        <div class="code-block">
1. EMPTY_ROW_SPLIT: 결측치 처리 및 연속 데이터 확보
2. MAKE_UTIL: 유틸리티 지표 계산
   예) MAXCAPA_UTIL = CMD / MAXCAPA * 100
3. MAKE_FUTURE: 10분 후 타겟 변수 생성
   예) FUTURE_HUB_JOB = 현재시점+10분의 CURRENT_M16A_3F_JOB_2
        </div>

        <h3>Step 2: AI 모델 예측</h3>
        <div class="process-flow">
            <div style="margin-bottom: 15px;">
                <strong>입력:</strong> 20분 × 38지표 시계열 데이터<br>
                <strong>모델:</strong> LSTM/GRU 시계열 신경망<br>
                <strong>출력:</strong> 10분 후 허브룸 반송량 예측값
            </div>
        </div>

        <h3>Step 3: 알람 판단</h3>
        <div class="warning-box">
            <div class="code-block">
예측 결과: 260개 (현재 180개)
임계값 비교: 260 > 250 (위험 기준)
알람 생성: "HUB STORAGE CAPA HIGH" 
조치 가이드: "M16 6F AI MAXCAPA 50% DOWN"
            </div>
        </div>
    </div>

    <!-- 7. 실제 시나리오 -->
    <div class="section page-break">
        <h2><span class="emoji">💡</span> 7. 실제 시나리오</h2>

        <h3>상황: 월요일 오전 9시</h3>
        <div class="info-box">
            <div class="code-block">
현재 허브룸 상황 (09:40~10:00):
- 현재 반송량: 180개 (정상)
- M16 생산량 급증: 신제품 양산 시작
- M14A CNV 점검: MAXCAPA 164→120 감소  
- Storage 사용률: 15% → 25% 증가 중
            </div>
        </div>

        <h3>AI 예측 결과 (10:00 시점)</h3>
        <div class="highlight-box">
            <div class="code-block">
🔮 10분 후 예측 (10:10):
- 허브룸 반송량: 260개 (위험!)
- Storage 사용률: 52% (50% 초과)
- 예상 원인: M14A 처리 능력 부족으로 유입>유출
            </div>
        </div>

        <h3>자동 알람 발생</h3>
        <div class="process-flow" style="background: #ffebee;">
            <div style="color: #d32f2f; font-weight: bold; font-size: 18px;">
                🚨 HUB STORAGE CAPA HIGH (예측 알람)<br><br>
                예상 시간: 2025-05-09 10:10<br>
                현재 반송량: 180개 → 예측: 260개<br>
                <span style="color: #e74c3c;">조치: M16 6F AI MAXCAPA 50% DOWN 즉시!</span>
            </div>
        </div>

        <h3>예방 조치 및 결과</h3>
        <div class="info-box">
            <div class="code-block">
10:02 - 담당자 MAXCAPA 50% 감소 실행
10:05 - M16 출고량 감소 효과 시작
10:10 - 실제 측정: 허브룸 반송량 195개 (위기 회피!)
10:15 - Storage 사용률 35% (정상 범위)
            </div>
        </div>
    </div>

    <!-- 8. 알람 시스템 -->
    <div class="section">
        <h2><span class="emoji">🚨</span> 8. 허브룸 중심 알람 시스템</h2>

        <h3>주요 알람 시나리오</h3>
        <table>
            <tr>
                <th>알람명</th>
                <th>예측 조건</th>
                <th>조치 방법</th>
            </tr>
            <tr>
                <td><strong>HUB STORAGE CAPA HIGH</strong></td>
                <td>허브룸 반송량 250개+ 예측<br>Storage 사용률 50%+ 예측</td>
                <td>M16 6F MAXCAPA 50% 감소</td>
            </tr>
            <tr>
                <td><strong>HUB Q Completed 감소</strong></td>
                <td>허브룸 처리량 급감 예측</td>
                <td>ERROR Vehicle 점검</td>
            </tr>
            <tr>
                <td><strong>HUB OHT 몰림</strong></td>
                <td>허브룸 내 OHT 정체 예측</td>
                <td>다양한 MAXCAPA 조정</td>
            </tr>
        </table>

        <h3>알람의 가치</h3>
        <ul>
            <li><strong>10분 선제 대응</strong>: 문제 발생 전 미리 조치</li>
            <li><strong>자동 가이드</strong>: 정확한 조치 방법 제시</li>
            <li><strong>전체 최적화</strong>: 허브룸 하나로 전체 FAB 안정화</li>
            <li><strong>생산성 향상</strong>: 라인 정지 방지로 막대한 손실 예방</li>
        </ul>
    </div>

    <!-- 결론 -->
    <div class="conclusion">
        <h2><span class="emoji">✨</span> 핵심 정리</h2>
        <h3>허브룸 반송량 예측 = FAB 전체 최적화</h3>
        
        <div style="margin: 20px 0; font-size: 16px; line-height: 1.8; text-align: left;">
            <strong>🎯 목적:</strong> 허브룸 과부하를 10분 전에 미리 예측<br>
            <strong>📊 방법:</strong> 38개 지표 × 20분 데이터로 AI 분석<br>
            <strong>🚨 알람:</strong> 위험 상황 사전 감지 및 조치 가이드<br>
            <strong>💰 가치:</strong> 전체 FAB 라인 정지 방지
        </div>
        
        <div style="font-size: 18px; font-weight: bold; margin-top: 25px; color: #ffd700;">
            "허브룸만 잘 관리하면<br>
            전체 반도체 FAB이 원활하게 돌아간다!" 🏭
        </div>
    </div>

    <div style="text-align: center; margin-top: 50px; padding: 20px; border-top: 2px solid #dee2e6;">
        <p style="color: #6c757d;">
            허브룸 반송량 예측 시스템 - 반도체 FAB의 심장을 지키는 AI<br>
            © 2025 HUBROOM Prediction System Documentation
        </p>
    </div>
</body>
</html>