<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>급증 예측 모델 설명서</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Malgun Gothic', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }
        
        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section h3 {
            color: #764ba2;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }
        
        .icon {
            font-size: 1.2em;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .highlight-box strong {
            color: #667eea;
            font-size: 1.1em;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-top: 4px solid #667eea;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .pattern-list {
            list-style: none;
            padding: 0;
        }
        
        .pattern-list li {
            background: white;
            margin: 10px 0;
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            font-size: 1.05em;
            transition: all 0.3s;
        }
        
        .pattern-list li:hover {
            background: #667eea10;
            transform: translateX(5px);
        }
        
        .pattern-list .percentage {
            color: #e74c3c;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #764ba2;
        }
        
        .feature-item strong {
            color: #764ba2;
            display: block;
            margin-bottom: 8px;
        }
        
        .feature-item ul {
            list-style: none;
            padding-left: 10px;
        }
        
        .feature-item li:before {
            content: "▸ ";
            color: #667eea;
            font-weight: bold;
        }
        
        .alert-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .alert-box h3 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .success-box {
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .success-box h3 {
            color: #155724;
            margin-bottom: 10px;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
        }
        
        .flow-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .flow-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin: 10px;
        }
        
        .flow-arrow {
            font-size: 2em;
            color: #667eea;
            margin: 0 10px;
        }
        
        .footer {
            background: #2d3436;
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .flow-diagram {
                flex-direction: column;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 급증 예측 모델 설명서</h1>
            <p>M16A_3F 작업량 급증을 사전에 예측하는 AI 시스템</p>
        </div>
        
        <div class="content">
            <!-- 개요 섹션 -->
            <div class="section">
                <h2><span class="icon">📋</span> 시스템 개요</h2>
                <p style="font-size: 1.1em; margin-bottom: 20px;">
                    이 시스템은 <strong>과거 30분 데이터</strong>를 분석하여 <strong>향후 10분 동안의 최대 작업량</strong>을 예측합니다. 
                    특히 <strong>300 이상의 급증 상황</strong>을 사전에 감지하여 선제적 대응이 가능하도록 설계되었습니다.
                </p>
                
                <div class="highlight-box">
                    <strong>🎯 예측 타겟:</strong> CURRENT_M16A_3F_JOB_2<br>
                    <strong>📊 학습 데이터:</strong> 1,804개의 급증 케이스 (전체의 3.00%)<br>
                    <strong>🤖 AI 모델:</strong> XGBoost (Extreme Gradient Boosting)
                </div>
                
                <div class="flow-diagram">
                    <div class="flow-item">
                        <div style="font-size: 2em;">📊</div>
                        <strong>과거 30분</strong>
                        <div style="color: #666; font-size: 0.9em;">데이터 수집</div>
                    </div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-item">
                        <div style="font-size: 2em;">🤖</div>
                        <strong>AI 분석</strong>
                        <div style="color: #666; font-size: 0.9em;">패턴 인식</div>
                    </div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-item">
                        <div style="font-size: 2em;">🎯</div>
                        <strong>향후 10분</strong>
                        <div style="color: #666; font-size: 0.9em;">최대값 예측</div>
                    </div>
                </div>
            </div>
            
            <!-- 핵심 발견 섹션 -->
            <div class="section">
                <h2><span class="icon">🔥</span> 급증 발생의 4가지 핵심 패턴</h2>
                <p style="margin-bottom: 20px;">
                    1,804개의 급증 사례를 분석한 결과, 다음 4가지 조건이 급증 발생과 강한 상관관계를 보입니다:
                </p>
                
                <ul class="pattern-list">
                    <li>
                        <strong>🏠 HUBROOMTOTAL &lt; 610</strong><br>
                        허브 공간이 610 미만일 때 → <span class="percentage">87.5%</span>의 급증 케이스 발생
                        <div style="margin-top: 8px; color: #666; font-size: 0.95em;">
                            💡 의미: 허브 공간 부족이 가장 강력한 급증 신호
                        </div>
                    </li>
                    <li>
                        <strong>💾 M16A_3F_STORAGE_UTIL ≥ 205</strong><br>
                        스토리지 활용률이 205 이상일 때 → <span class="percentage">82.9%</span>의 급증 케이스 발생
                        <div style="margin-top: 8px; color: #666; font-size: 0.95em;">
                            💡 의미: 스토리지 포화가 임박하면 작업 대기 증가
                        </div>
                    </li>
                    <li>
                        <strong>⚙️ CMD &lt; 220</strong><br>
                        커맨드(처리능력)가 220 미만일 때 → <span class="percentage">45.4%</span>의 급증 케이스 발생
                        <div style="margin-top: 8px; color: #666; font-size: 0.95em;">
                            💡 의미: 처리 능력 저하로 작업 적체 발생
                        </div>
                    </li>
                    <li>
                        <strong>📂 FS_UTIL ≥ 7</strong><br>
                        파일시스템 활용률이 7 이상일 때 → <span class="percentage">25.3%</span>의 급증 케이스 발생
                        <div style="margin-top: 8px; color: #666; font-size: 0.95em;">
                            💡 의미: 파일시스템 부하 증가 시 작업 지연
                        </div>
                    </li>
                </ul>
                
                <div class="alert-box">
                    <h3>⚠️ 복합 위험 상황</h3>
                    <p>
                        <strong>HUBROOMTOTAL &lt; 610</strong> + <strong>FS_UTIL ≥ 7</strong> 동시 발생 시<br>
                        → <strong style="color: #e74c3c;">극도로 높은 급증 위험</strong> (즉시 조치 필요)
                    </p>
                </div>
            </div>
            
            <!-- 주요 통계 섹션 -->
            <div class="section">
                <h2><span class="icon">📊</span> 주요 통계</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">총 급증 케이스</div>
                        <div class="stat-number">1,804개</div>
                        <div class="stat-label">전체 데이터의 3.00%</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">평균 급증량</div>
                        <div class="stat-number">22.9</div>
                        <div class="stat-label">300 미만 → 300 이상</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">최대 급증량</div>
                        <div class="stat-number">130.0</div>
                        <div class="stat-label">10분 내 최대 증가량</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">총 Feature 개수</div>
                        <div class="stat-number">~80개</div>
                        <div class="stat-label">AI 학습 변수</div>
                    </div>
                </div>
            </div>
            
            <!-- Feature 설명 섹션 -->
            <div class="section">
                <h2><span class="icon">🔧</span> AI가 학습하는 데이터 (Features)</h2>
                <p style="margin-bottom: 20px;">
                    AI 모델은 총 <strong>약 80개의 변수</strong>를 분석하여 예측을 수행합니다. 주요 변수 그룹은 다음과 같습니다:
                </p>
                
                <div class="feature-grid">
                    <div class="feature-item">
                        <strong>🎯 타겟 변수 (7개)</strong>
                        <ul>
                            <li>평균, 표준편차</li>
                            <li>최대값, 최소값</li>
                            <li>현재값, 최근 5개 평균</li>
                            <li>추세 (기울기)</li>
                        </ul>
                    </div>
                    
                    <div class="feature-item">
                        <strong>🏠 허브 공간 (13개) ⭐</strong>
                        <ul>
                            <li>HUBROOMTOTAL 통계</li>
                            <li>hub_critical (&lt; 590)</li>
                            <li>hub_high (&lt; 610) 🔥</li>
                            <li>hub_warning (&lt; 620)</li>
                            <li>감소율, 복합 위험도</li>
                        </ul>
                    </div>
                    
                    <div class="feature-item">
                        <strong>💾 파일시스템 (12개) ⭐</strong>
                        <ul>
                            <li>사용량, 전체 용량</li>
                            <li>활용률 (FS_UTIL)</li>
                            <li>storage_util_high (≥ 7)</li>
                            <li>storage_util_critical (≥ 10)</li>
                            <li>사용률, 잔여 공간</li>
                        </ul>
                    </div>
                    
                    <div class="feature-item">
                        <strong>⚙️ 처리 능력 (20개)</strong>
                        <ul>
                            <li>M16A_3F_CMD</li>
                            <li>M16A_6F_TO_HUB_CMD</li>
                            <li>total_cmd_low (&lt; 220)</li>
                            <li>total_cmd_very_low (&lt; 200)</li>
                            <li>각 통계값 (평균, 추세 등)</li>
                        </ul>
                    </div>
                    
                    <div class="feature-item">
                        <strong>📦 스토리지 (13개)</strong>
                        <ul>
                            <li>M16A_3F_STORAGE_UTIL</li>
                            <li>storage_util_critical (≥ 205)</li>
                            <li>storage_util_high_risk (≥ 207)</li>
                            <li>각 통계값</li>
                        </ul>
                    </div>
                    
                    <div class="feature-item">
                        <strong>🔄 유입/유출</strong>
                        <ul>
                            <li>6F, 2F, 14A에서 유입</li>
                            <li>6F, 2F, 14A로 유출</li>
                            <li>순 유입량 (net_flow)</li>
                        </ul>
                    </div>
                    
                    <div class="feature-item">
                        <strong>🚀 복합 위험 지표</strong>
                        <ul>
                            <li>hub_storage_risk</li>
                            <li>hub_cmd_bottleneck</li>
                            <li>여러 조건 동시 발생 감지</li>
                        </ul>
                    </div>
                    
                    <div class="feature-item">
                        <strong>📊 최대 용량</strong>
                        <ul>
                            <li>M16A_6F_LFT_MAXCAPA</li>
                            <li>M16A_2F_LFT_MAXCAPA</li>
                            <li>현재값만 사용</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 모델 성능 섹션 -->
            <div class="section">
                <h2><span class="icon">📈</span> 모델 성능</h2>
                
                <div class="success-box">
                    <h3>✅ 전체 예측 성능</h3>
                    <div style="font-size: 1.1em; margin-top: 10px;">
                        <strong>MAE (평균 절대 오차):</strong> 낮을수록 좋음 → 실제 운영 시 확인<br>
                        <strong>RMSE (평균 제곱근 오차):</strong> 큰 오차에 민감 → 실제 운영 시 확인<br>
                        <strong>R² Score:</strong> 1에 가까울수록 좋음 → 실제 운영 시 확인
                    </div>
                </div>
                
                <h3>🎯 급증 예측 특화 성능</h3>
                <p style="margin: 15px 0;">
                    <strong>급증 기준:</strong> 현재값 &lt; 300 → 10분 후 ≥ 300<br>
                    <strong>감지 기준:</strong> 예측값 ≥ 290
                </p>
                
                <div class="highlight-box">
                    <p style="font-size: 1.05em;">
                        모델은 <strong>급증 케이스를 사전에 감지</strong>하는 것에 특화되어 있습니다.<br>
                        실제 성능은 평가 데이터(HUB0905101512.csv)로 테스트 후 확인됩니다.
                    </p>
                </div>
            </div>
            
            <!-- 활용 방법 섹션 -->
            <div class="section">
                <h2><span class="icon">💼</span> 실제 활용 방법</h2>
                
                <h3>1️⃣ 학습 단계 (train_final_optimized)</h3>
                <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 8px;">
                    <p><strong>📁 필요 파일:</strong> 20250904_TO_20251020.csv (학습 데이터)</p>
                    <p><strong>🎯 작업:</strong></p>
                    <ul style="margin-left: 25px; margin-top: 10px;">
                        <li>1,804개 급증 케이스 분석</li>
                        <li>80여개 Feature 생성</li>
                        <li>XGBoost 모델 학습</li>
                        <li>Feature 중요도 분석</li>
                    </ul>
                    <p style="margin-top: 10px;"><strong>💾 출력:</strong> xgboost_최종_급증최적화.pkl (학습된 모델)</p>
                </div>
                
                <h3>2️⃣ 평가 단계 (evaluate_surge_optimized)</h3>
                <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 8px;">
                    <p><strong>📁 필요 파일:</strong> HUB0905101512.csv (평가 데이터)</p>
                    <p><strong>🎯 작업:</strong></p>
                    <ul style="margin-left: 25px; margin-top: 10px;">
                        <li>슬라이딩 윈도우 방식으로 전체 데이터 평가</li>
                        <li>매 시점마다 30분 데이터로 10분 후 예측</li>
                        <li>급증 감지 성공률 계산</li>
                        <li>위험도 판정 (HIGH/MEDIUM/LOW)</li>
                    </ul>
                    <p style="margin-top: 10px;"><strong>💾 출력:</strong> 최종_급증최적화_평가결과.csv</p>
                </div>
                
                <h3>3️⃣ 실시간 모니터링 활용</h3>
                <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 8px;">
                    <ol style="margin-left: 25px;">
                        <li><strong>데이터 수집:</strong> 최근 30분 데이터 준비</li>
                        <li><strong>Feature 생성:</strong> 80여개 변수 계산</li>
                        <li><strong>예측 실행:</strong> 모델에 입력하여 10분 후 최대값 예측</li>
                        <li><strong>위험도 판정:</strong>
                            <ul style="margin-left: 20px; margin-top: 5px;">
                                <li>HIGH: HUBROOMTOTAL &lt; 610 또는 STORAGE_UTIL ≥ 205</li>
                                <li>MEDIUM: CMD &lt; 220 또는 FS_UTIL ≥ 7</li>
                                <li>LOW: 그 외</li>
                            </ul>
                        </li>
                        <li><strong>조치:</strong> 예측값 ≥ 290인 경우 선제적 대응</li>
                    </ol>
                </div>
            </div>
            
            <!-- 기술 사양 섹션 -->
            <div class="section">
                <h2><span class="icon">⚙️</span> 기술 사양</h2>
                
                <h3>🤖 XGBoost 모델 설정</h3>
                <div class="code-block">
n_estimators = 200        # 트리 개수 (더 많은 패턴 학습)
max_depth = 7             # 트리 깊이 (복잡한 패턴 포착)
learning_rate = 0.04      # 학습률 (안정적 학습)
subsample = 0.85          # 샘플링 비율
colsample_bytree = 0.85   # Feature 샘플링
min_child_weight = 2      # 과적합 방지
gamma = 0.05              # 분할 최소 손실 감소
reg_alpha = 0.05          # L1 규제
reg_lambda = 0.8          # L2 규제
                </div>
                
                <h3>💻 시스템 요구사항</h3>
                <ul style="margin-left: 25px; margin-top: 10px;">
                    <li><strong>Python 라이브러리:</strong> numpy, pandas, xgboost, scikit-learn, matplotlib</li>
                    <li><strong>GPU 지원:</strong> 선택사항 (GPU 사용 시 학습 속도 향상)</li>
                    <li><strong>메모리:</strong> 최소 8GB RAM 권장</li>
                    <li><strong>저장공간:</strong> 모델 파일 및 결과 저장을 위한 충분한 공간</li>
                </ul>
            </div>
            
            <!-- 주의사항 섹션 -->
            <div class="section">
                <h2><span class="icon">⚠️</span> 중요 주의사항</h2>
                
                <div class="alert-box">
                    <h3>📌 데이터 품질</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>반드시 30개 이상의 연속된 데이터 포인트 필요</li>
                        <li>결측치가 있으면 해당 구간 예측 불가</li>
                        <li>데이터 수집 간격이 일정해야 함 (1분 단위 권장)</li>
                    </ul>
                </div>
                
                <div class="alert-box">
                    <h3>🎯 예측 한계</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>예측은 확률적 판단이며 100% 정확하지 않음</li>
                        <li>학습 데이터에 없는 극단적 상황은 예측 어려움</li>
                        <li>시스템 환경 변화 시 재학습 필요</li>
                    </ul>
                </div>
                
                <div class="success-box">
                    <h3>✅ 최적 활용 팁</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>정기 재학습:</strong> 월 1회 이상 최신 데이터로 모델 업데이트</li>
                        <li><strong>복합 모니터링:</strong> 예측값과 함께 위험 지표(HUBROOMTOTAL, STORAGE_UTIL 등) 동시 확인</li>
                        <li><strong>임계값 조정:</strong> 운영 환경에 맞춰 급증 감지 기준(현재 290) 조정 가능</li>
                        <li><strong>로그 분석:</strong> 예측 실패 케이스 분석하여 모델 개선</li>
                    </ul>
                </div>
            </div>
            
            <!-- 요약 섹션 -->
            <div class="section" style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-left: 5px solid #e74c3c;">
                <h2><span class="icon">📝</span> 핵심 요약</h2>
                
                <div style="font-size: 1.1em; line-height: 1.8;">
                    <p><strong>🎯 목적:</strong> M16A_3F 작업량 급증을 10분 전에 예측하여 선제적 대응</p>
                    
                    <p><strong>📊 학습 기반:</strong> 1,804개 급증 케이스 (3.00%) 분석</p>
                    
                    <p><strong>🔥 핵심 4대 지표:</strong></p>
                    <ul style="margin-left: 30px;">
                        <li>HUBROOMTOTAL &lt; 610 (87.5% 급증)</li>
                        <li>STORAGE_UTIL ≥ 205 (82.9% 급증)</li>
                        <li>CMD &lt; 220 (45.4% 급증)</li>
                        <li>FS_UTIL ≥ 7 (25.3% 급증)</li>
                    </ul>
                    
                    <p><strong>🤖 AI 모델:</strong> XGBoost, 80여개 Feature 분석</p>
                    
                    <p><strong>⚡ 실시간 활용:</strong> 30분 데이터 입력 → 10분 후 최대값 예측 + 위험도 판정</p>
                    
                    <p><strong>✅ 기대 효과:</strong> 급증 상황 사전 감지로 시스템 안정성 향상 및 운영 효율화</p>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p style="font-size: 1.2em; margin-bottom: 10px;">🎯 급증 예측 모델 설명서</p>
            <p style="opacity: 0.8;">M16A_3F 작업량 관리를 위한 AI 기반 예측 시스템</p>
            <p style="opacity: 0.7; margin-top: 15px; font-size: 0.9em;">
                문의사항이나 추가 설명이 필요하신 경우 언제든지 연락 주시기 바랍니다.
            </p>
        </div>
    </div>
</body>
</html>