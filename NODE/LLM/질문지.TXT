실시간 예측 통합 RAG 시스템 사용 가이드

============================================================
📦 파일 구조
============================================================

1. 실시간_예측.py        - 예측 전용 모듈
2. RAG2_FINAL.py         - RAG 시스템 (예측 모듈 사용)
3. 벡터DB_TEST.py        - 벡터DB 생성
4. model_13col_final.pkl - 학습된 예측 모델
5. data/*.CSV            - 실시간 데이터

============================================================
🚀 실행 방법
============================================================

1단계: 벡터DB 생성 (최초 1회만)
   python 벡터DB_TEST.py

2단계: 모델 파일 확인
   - model_13col_final.pkl 있어야 함
   - 없으면 V8_2학습.py 실행

3단계: RAG 시스템 실행
   python RAG2_FINAL.py

============================================================
💬 질문 예시
============================================================

1. 실시간 예측 질문
   - "10분 후 물류량 예측해줘"
   - "앞으로 어떻게 될까?"
   - "예측해줘"
   
   → 실시간_예측.py 실행
   → 예측 결과 + LLM 설명

2. 과거 데이터 조회
   - "2025-10-14 4:43 실제값"
   - "2025-10-14 4:45 데이터 확인"
   
   → CSV에서 즉시 조회

3. 통계 질문
   - "실제값이 가장 큰 시간은?"
   - "예측이 가장 정확한 시간은?"
   
   → Python 계산 (LLM 안 씀)

4. 일반 RAG 질문
   - "데이터의 전반적인 경향은?"
   - "오차가 큰 구간의 특징은?"
   
   → 벡터 검색 + LLM 설명

============================================================
📊 예측 질문 예상 응답
============================================================

질문: "10분 후 물류량 예측해줘"

응답:
🔮 실시간 예측 결과
============================================================
현재 물류량: 1,450 [NORMAL]
예측 물류량: 1,720 [CRITICAL]
변화량: +270
============================================================
M14AM14B: 525
M14AM14BSUM: 590
queue_gap: 310
TRANSPORT: 160

황금패턴: ⭐⭐⭐ 엄격 (1700+ 확률 85%!)
🚨 Gap 위험 매우 높음 (>300)
🚨 Transport 위험 매우 높음 (>151)
⚠️ 1700+ 예측!

💡 AI 설명:
현재 1,450에서 10분 후 1,720으로 270 증가가 예상됩니다. 
황금패턴(엄격)이 감지되었고 Gap과 Transport가 모두 
위험 수준을 넘어서 1700+ 임계값 초과가 확실시됩니다.

============================================================
⚙️ 파일 연결 구조
============================================================

RAG2_FINAL.py
    ↓
    import 실시간_예측
    ↓
    질문에 "예측" 포함?
    ↓
    YES → 실시간_예측.predict_latest() 호출
         ↓
         예측 결과 반환
         ↓
         LLM에게 설명 생성 요청
         ↓
         최종 출력

============================================================
🔧 문제 해결
============================================================

Q: "실시간_예측.py 없음" 에러
A: 같은 디렉토리에 실시간_예측.py 있어야 함

Q: "모델 파일 없음" 에러
A: model_13col_final.pkl 파일 필요
   → V8_2학습.py 실행해서 생성

Q: "CSV 파일 없음" 에러
A: data/M14_Q_*.CSV 파일 필요
   → 경로 확인

Q: "데이터 부족" 에러
A: CSV에 최소 280개 행 필요

Q: 예측 안 됨
A: 질문에 "예측", "10분 후", "앞으로" 키워드 포함

============================================================
📁 필수 파일 체크리스트
============================================================

✅ RAG2_FINAL.py
✅ 실시간_예측.py
✅ model_13col_final.pkl
✅ data/M14_Q_20251014_TO_20251015.CSV
✅ chroma_db/vectordb.pkl
✅ embeddings/all-MiniLM-L6-v2/
✅ models/Qwen3-Coder-30B-A3B-Instruct-Q3_K_M.gguf

============================================================
🎯 핵심 포인트
============================================================

1. 2개 파일로 분리
   - 실시간_예측.py = 예측만
   - RAG2_FINAL.py = RAG + 예측 통합

2. RAG가 예측 모듈을 import해서 사용

3. 질문 키워드로 자동 분기
   - "예측" → 실시간 예측
   - 시간 + "실제값" → CSV 조회
   - "가장 큰" → Python 계산
   - 나머지 → RAG

4. LLM은 설명만 담당
   - 예측 = XGBoost 모델
   - 계산 = Python/pandas
   - 설명 = LLM

============================================================