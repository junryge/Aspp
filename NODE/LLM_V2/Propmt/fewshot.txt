# FABJOB 분석 예시 (Few-shot)

## 예시 1: 지연 발생 케이스 (HCACK=2로 인한 OHT 대기)

### 입력 (전처리 결과)
```
📍 캐리어: 4PDM0001
📍 전체 경로: M14A STB(4ANZ40G1) → M16A STB(6ANZ0202)
⏱️ 총 소요시간: 49분 18초 (정상: 20분 이내)
🔴 결과: **지연 발생**

### ⚠️ HCACK 응답 분석
| 시간 | HCACK | 의미 |
| 2026-01-21 11:12:04.486 | 2 | ❌ 거부 |
| 2026-01-21 11:13:30.392 | 2 | ❌ 거부 |
| 2026-01-21 11:44:14.892 | 4 | ✅ 시작됨 |

🔴 HCACK=2 (OHT 반송 거절) 2회 발생!
→ OHT 대기 시간: 32분 10초

### 🕒 구간별 소요시간
| 구간 | 시작 | 종료 | 소요시간 | 상태 |
| M14A STB → M14A OHT | 11:12:03 | 11:44:36 | 32분 32초 | 🔴 지연 |
| M14A OHT → M14 Conveyor | 11:44:36 | 11:46:27 | 1분 50초 | ✅ 정상 |
| M14 Conveyor → M16 Conveyor | 11:46:27 | 11:51:31 | 5분 4초 | ✅ 정상 |
| M16 Conveyor → M16 Bridge OHT | 11:51:31 | 11:52:21 | 49초 | ✅ 정상 |
| M16 Bridge OHT → M16A Lifter 3F | 11:52:21 | 11:56:04 | 3분 43초 | ✅ 정상 |
| M16A Lifter 3F → M16A Lifter 6F | 11:56:04 | 11:59:45 | 3분 41초 | ✅ 정상 |
| M16A Lifter 6F → M16A OHT | 11:59:45 | 12:00:25 | 39초 | ✅ 정상 |
| M16A OHT → M16A STB | 12:00:25 | 12:01:22 | 57초 | ✅ 정상 |
```

### 출력 (원하는 답변 형식)
```
📦 캐리어: 4PDM0001   
📍 전체 경로: M14A STB(4ANZ40G1) → M16A STB(6ANZ0202)

⏱️ 총 소요시간: 약 49분 (정상: 20분 이내)   
✅ 결과: **지연 발생**   
 
--- 
 
### 🧭 전체 JOB 흐름 요약 
 
1. **JOB 생성 (11:12:03)**   
   - `VM-FABTRANSPORTJOBCREATED`
   - 캐리어 `4PDM0001`이 M14A에서 M16A로 이송 요청됨   
 
2. **이송 진행**   
   - M14A STB → M14A OHT → M14 Conveyor → M16 Conveyor 
   - → M16 Bridge OHT → M16A Lifter (3F→6F) → M16A OHT → M16A STB
 
3. **완료 (12:01:22)**   
   - `VM-TRANSPORTJOBCOMPLETED`
   - 최종 위치: M16A STB(6ANZ0202)   
 
--- 
 
### 🕒 구간별 소요 시간 및 상태 
 
| 구간 | 시작 시간 | 종료 시간 | 소요 시간 | 상태 | 
|------|-----------|-----------|------------|------| 
| M14A STB → M14A OHT | 11:12:03 | 11:44:36 | **32분 32초** | 🔴 지연 | 
| M14A OHT → M14 Conveyor | 11:44:36 | 11:46:27 | 1분 50초 | ✅ 정상 | 
| M14 Conveyor → M16 Conveyor | 11:46:27 | 11:51:31 | 5분 4초 | ✅ 정상 | 
| M16 Conveyor → M16 Bridge OHT | 11:51:31 | 11:52:21 | 49초 | ✅ 정상 | 
| M16 Bridge OHT → M16A Lifter 3F | 11:52:21 | 11:56:04 | 3분 43초 | ✅ 정상 | 
| M16A Lifter 3F → M16A Lifter 6F | 11:56:04 | 11:59:45 | 3분 41초 | ✅ 정상 | 
| M16A Lifter 6F → M16A OHT | 11:59:45 | 12:00:25 | 39초 | ✅ 정상 | 
| M16A OHT → M16A STB | 12:00:25 | 12:01:22 | 57초 | ✅ 정상 | 

--- 
 
### ⚠️ 주요 문제점 
 
**M14A STB → M14A OHT 구간에서 32분 지연 발생!**

- 출발지 STB에서 OHT가 캐리어를 획득하기까지 오래 걸림
- 정상 소요시간(1~2분)의 약 **16배 지연**

**지연 원인: HCACK=2 (OHT 반송 거절)**
- 2026-01-21 11:12:04.486 `RAIL-CARRIERTRANSFERREPLY` [HCACK] '2' → 거절
- 2026-01-21 11:13:30.392 `RAIL-CARRIERTRANSFERREPLY` [HCACK] '2' → 거절
- 2026-01-21 11:44:14.892 `RAIL-CARRIERTRANSFERREPLY` [HCACK] '4' → 시작됨

**결론: OHT 반송 거절로 인한 32분 대기**

--- 
 
### 🔍 지연 원인 추정 
 
HCACK=2 (OHT 반송 거절)가 2회 발생했습니다.

**추정되는 원인:**
1. **OHT Vehicle 할당 문제**
   - 해당 시간대 OHT 차량이 다른 JOB을 처리 중
   - 가용 차량 부족으로 인한 대기

2. **OHT Rail Cut 문제**
   - 경로 일부가 차단되어 우회 필요
   - Rail 점검/작업으로 인한 차량 운행 제한

--- 
 
### 💡 권장 조치 
 
1. **OHT 가용성 점검** 
   - 11:12 ~ 11:44 시간대 4ACM4701 컨트롤러의 차량 상태 확인
   - 동시간대 다른 JOB의 OHT 점유 현황 분석
 
2. **Rail Cut 여부 확인**
   - M14A 구역 Rail 차단 이력 확인
   - 정기 점검/긴급 작업으로 인한 경로 제한 여부

3. **장시간 지연 알림 기능**
   - STB → OHT 구간 5분 이상 지연 시 자동 알림 추가 검토
 
--- 
 
### 📌 결론 
 
이 이송 JOB은 **정상적으로 완료**되었지만, **총 소요 시간이 49분으로 정상 범위(20분)를 크게 초과**했습니다.

**핵심 문제:**
- M14A STB → M14A OHT 구간에서 **32분 지연**
- 원인: **HCACK=2 (OHT 반송 거절)** 2회 발생
- 추정: OHT Vehicle 할당 문제 또는 Rail Cut

📌 **OHT 가용성 및 Rail Cut 여부 확인이 필요합니다.**
```

---

## 답변 작성 규칙

1. **전처리 결과의 시간을 그대로 사용** - 임의로 변경 금지!
2. **STB로 표기** - Stocker 사용 금지
3. **HCACK=2 발생 시 상세 분석 필수**
   - 정확한 시간과 횟수
   - "OHT 반송 거절"이라고 명시
   - 추정 원인: Vehicle 할당 문제, Rail Cut 등
4. **지연 구간 정확히 식별**
   - 어느 구간에서 지연되었는지 명확히
   - 정상 소요시간 대비 몇 배 지연인지
5. **이모지 활용**: ✅🟡⚠️🔴 등으로 가독성 향상
6. **마크다운 표 사용**: 구간별 시간 비교에 효과적