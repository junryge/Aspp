<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V5 모델 성능 평가 지표</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @media print {
            body { margin: 0; }
            .page-break { page-break-after: always; }
        }
        
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: white;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .table-container {
            margin-bottom: 50px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            font-size: 13px;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        th {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            white-space: nowrap;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        tr:first-child td {
            background-color: #e8f5e9;
            font-weight: bold;
        }
        
        .highlight-column {
            background-color: #fff3cd !important;
            font-weight: bold;
        }
        
        .chart-container {
            width: 45%;
            display: inline-block;
            margin: 20px 2.5%;
            height: 350px;
        }
        
        .chart-row {
            text-align: center;
            margin-bottom: 50px;
        }
        
        canvas {
            max-height: 300px;
        }
        
        .print-button {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .print-button:hover {
            background-color: #45a049;
        }
        
        @media print {
            .print-button {
                display: none;
            }
        }
        
        .metric-title {
            text-align: center;
            font-size: 20px;
            margin: 40px 0 20px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <button class="print-button" onclick="window.print()">PDF로 저장/인쇄</button>
    
    <h1>V5 앙상블 모델 성능 평가 지표</h1>
    
    <!-- 전체 성능 지표 표 -->
    <div class="table-container">
        <h2>모델별 성능 지표</h2>
        <table>
            <thead>
                <tr>
                    <th>모델명</th>
                    <th>MAE</th>
                    <th>RMSE</th>
                    <th>R² Score</th>
                    <th class="highlight-column">예측 오차 (%)</th>
                    <th>MAPE (%)</th>
                    <th>10% 오차 범위<br>정확도 (%)</th>
                    <th>병목구간(1400+)<br>정확도 (%)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>New Ensemble V5.0</td>
                    <td>62.8</td>
                    <td>83.2</td>
                    <td>0.872</td>
                    <td class="highlight-column">4.47</td>
                    <td>4.47</td>
                    <td>93.7</td>
                    <td>89.2</td>
                </tr>
                <tr>
                    <td>신형 GRU</td>
                    <td>69.5</td>
                    <td>92.1</td>
                    <td>0.843</td>
                    <td class="highlight-column">4.95</td>
                    <td>4.95</td>
                    <td>91.2</td>
                    <td>85.7</td>
                </tr>
                <tr>
                    <td>신형 CNN-LSTM</td>
                    <td>71.3</td>
                    <td>94.8</td>
                    <td>0.834</td>
                    <td class="highlight-column">5.08</td>
                    <td>5.08</td>
                    <td>90.3</td>
                    <td>84.1</td>
                </tr>
                <tr>
                    <td>LSTM 예측값</td>
                    <td>85.2</td>
                    <td>112.4</td>
                    <td>0.766</td>
                    <td class="highlight-column">6.07</td>
                    <td>6.07</td>
                    <td>85.6</td>
                    <td>78.3</td>
                </tr>
                <tr>
                    <td>Spike Detector</td>
                    <td>126.8</td>
                    <td>158.3</td>
                    <td>0.537</td>
                    <td class="highlight-column">9.03</td>
                    <td>9.03</td>
                    <td>71.2</td>
                    <td>92.1</td>
                </tr>
            </tbody>
        </table>
        <p style="text-align: center; color: #666; font-size: 12px;">※ 예측 오차(%) = MAPE(평균 절대 백분율 오차)</p>
    </div>
    
    <!-- 차트 섹션 -->
    <div class="page-break"></div>
    
    <h2 class="metric-title">3대 핵심 지표 비교</h2>
    
    <div class="chart-row">
        <div class="chart-container">
            <h3>예측 오차 (%)</h3>
            <canvas id="errorChart"></canvas>
        </div>
        <div class="chart-container">
            <h3>R² Score (%)</h3>
            <canvas id="r2Chart"></canvas>
        </div>
    </div>
    
    <div class="chart-row">
        <div class="chart-container" style="width: 60%; margin: 0 auto;">
            <h3>병목구간(1400+) 예측 정확도 (%)</h3>
            <canvas id="bottleneckChart"></canvas>
        </div>
    </div>

    <script>
        // 예측 오차 차트
        const errorCtx = document.getElementById('errorChart').getContext('2d');
        new Chart(errorCtx, {
            type: 'bar',
            data: {
                labels: ['Ensemble V5.0', '신형 GRU', '신형 CNN-LSTM', 'LSTM', 'Spike Detector'],
                datasets: [{
                    data: [4.47, 4.95, 5.08, 6.07, 9.03],
                    backgroundColor: ['#4CAF50', '#2196F3', '#FF9800', '#9C27B0', '#F44336'],
                    borderColor: '#333',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: '낮을수록 좋음',
                        font: { size: 14 }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        // R² Score 차트 (백분율로 표시)
        const r2Ctx = document.getElementById('r2Chart').getContext('2d');
        new Chart(r2Ctx, {
            type: 'bar',
            data: {
                labels: ['Ensemble V5.0', '신형 GRU', '신형 CNN-LSTM', 'LSTM', 'Spike Detector'],
                datasets: [{
                    data: [87.2, 84.3, 83.4, 76.6, 53.7],
                    backgroundColor: ['#4CAF50', '#2196F3', '#FF9800', '#9C27B0', '#F44336'],
                    borderColor: '#333',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: '높을수록 좋음',
                        font: { size: 14 }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        // 병목구간 예측 정확도 차트
        const bottleneckCtx = document.getElementById('bottleneckChart').getContext('2d');
        new Chart(bottleneckCtx, {
            type: 'bar',
            data: {
                labels: ['Spike Detector', 'Ensemble V5.0', '신형 GRU', '신형 CNN-LSTM', 'LSTM'],
                datasets: [{
                    data: [92.1, 89.2, 85.7, 84.1, 78.3],
                    backgroundColor: ['#F44336', '#4CAF50', '#2196F3', '#FF9800', '#9C27B0'],
                    borderColor: '#333',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: '높을수록 좋음',
                        font: { size: 14 }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>